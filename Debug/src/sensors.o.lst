   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"sensors.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.global	I2C2_ProcesState
  19              		.bss
  20              		.align	1
  23              	I2C2_ProcesState:
  24 0000 0000     		.space	2
  25              		.comm	I2C2_Flags,8,4
  26              		.global	I2C2_StartReg
  27              		.align	1
  30              	I2C2_StartReg:
  31 0002 0000     		.space	2
  32              		.global	I2C2_ReadData
  33              		.align	1
  36              	I2C2_ReadData:
  37 0004 0000     		.space	2
  38              		.global	I2C2_WriteData
  39              		.align	1
  42              	I2C2_WriteData:
  43 0006 0000     		.space	2
  44              		.global	I2C2_DeviceAddress
  47              	I2C2_DeviceAddress:
  48 0008 00       		.space	1
  49              		.comm	I2C2_DMABufTX,128,4
  50              		.comm	I2C2_DMABufRX,128,4
  51              		.global	I2C2_DMABufTXCount
  52 0009 000000   		.align	2
  55              	I2C2_DMABufTXCount:
  56 000c 00000000 		.space	4
  57              		.global	I2C2_DMABufRXCount
  58              		.align	2
  61              	I2C2_DMABufRXCount:
  62 0010 00000000 		.space	4
  63              		.global	I2C2_PollTimer
  64              		.align	2
  67              	I2C2_PollTimer:
  68 0014 00000000 		.space	4
  69              		.text
  70              		.align	2
  71              		.global	sensorInit
  72              		.thumb
  73              		.thumb_func
  75              	sensorInit:
  76              	.LFB110:
  77              		.file 1 "../src/sensors.c"
   1:../src/sensors.c **** /*
   2:../src/sensors.c ****  * sensors.c
   3:../src/sensors.c ****  *
   4:../src/sensors.c ****  *  Created on: Oct 31, 2012
   5:../src/sensors.c ****  *      Author: Jure
   6:../src/sensors.c ****  */
   7:../src/sensors.c **** 
   8:../src/sensors.c **** #include "allinclude.h"
   9:../src/sensors.c **** 
  10:../src/sensors.c **** uint16_t I2C2_ProcesState = 0;
  11:../src/sensors.c **** Flag I2C2_Flags;
  12:../src/sensors.c **** uint16_t I2C2_StartReg = 0;
  13:../src/sensors.c **** uint16_t I2C2_ReadData = 0;
  14:../src/sensors.c **** uint16_t I2C2_WriteData = 0;
  15:../src/sensors.c **** uint8_t I2C2_DeviceAddress = 0;
  16:../src/sensors.c **** uint8_t I2C2_DMABufTX[DMA_BUF_COUNT];
  17:../src/sensors.c **** uint8_t I2C2_DMABufRX[DMA_BUF_COUNT];
  18:../src/sensors.c **** int I2C2_DMABufTXCount = 0;
  19:../src/sensors.c **** int I2C2_DMABufRXCount = 0;
  20:../src/sensors.c **** int I2C2_PollTimer = 0;
  21:../src/sensors.c **** 
  22:../src/sensors.c **** // Initialize I2C sensors
  23:../src/sensors.c **** void sensorInit()
  24:../src/sensors.c **** {
  78              		.loc 1 24 0
  79              		.cfi_startproc
  80              		@ args = 0, pretend = 0, frame = 0
  81              		@ frame_needed = 1, uses_anonymous_args = 0
  82 0000 80B5     		push	{r7, lr}
  83              	.LCFI0:
  84              		.cfi_def_cfa_offset 8
  85              		.cfi_offset 14, -4
  86              		.cfi_offset 7, -8
  87 0002 00AF     		add	r7, sp, #0
  88              	.LCFI1:
  89              		.cfi_def_cfa_register 7
  25:../src/sensors.c **** 	I2C2_INITDONE = 0;
  90              		.loc 1 25 0
  91 0004 40F20003 		movw	r3, #:lower16:flag0
  92 0008 C0F20003 		movt	r3, #:upper16:flag0
  93 000c 1A78     		ldrb	r2, [r3, #0]
  94 000e 6FF30412 		bfc	r2, #4, #1
  95 0012 1A70     		strb	r2, [r3, #0]
  26:../src/sensors.c **** 	// Check if MPU is in sleep mode
  27:../src/sensors.c **** 	// Read reg 107
  28:../src/sensors.c **** 	masterReceive(MPU6000_ADDRESS, 107, I2C2_DMABufRX, 5);
  96              		.loc 1 28 0
  97 0014 4FF0D000 		mov	r0, #208
  98 0018 4FF06B01 		mov	r1, #107
  99 001c 40F20002 		movw	r2, #:lower16:I2C2_DMABufRX
 100 0020 C0F20002 		movt	r2, #:upper16:I2C2_DMABufRX
 101 0024 4FF00503 		mov	r3, #5
 102 0028 FFF7FEFF 		bl	masterReceive
  29:../src/sensors.c **** 	Delaynus(20000);
 103              		.loc 1 29 0
 104 002c 44F62060 		movw	r0, #20000
 105 0030 FFF7FEFF 		bl	Delaynus
  30:../src/sensors.c **** 	// Check bit 6 - device sleep
  31:../src/sensors.c **** 	if((I2C2_DMABufRX[0] & _BIT7) == 0)
 106              		.loc 1 31 0
 107 0034 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 108 0038 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 109 003c 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 110 003e DBB2     		uxtb	r3, r3
 111 0040 5BB2     		sxtb	r3, r3
 112 0042 002B     		cmp	r3, #0
 113 0044 23DB     		blt	.L2
  32:../src/sensors.c **** 	{
  33:../src/sensors.c **** 		// Device was configured, reset MPU
  34:../src/sensors.c **** 		I2C2_DMABufTX[0] = 107;
 114              		.loc 1 34 0
 115 0046 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 116 004a C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 117 004e 4FF06B02 		mov	r2, #107
 118 0052 1A70     		strb	r2, [r3, #0]
  35:../src/sensors.c **** 		I2C2_DMABufTX[1] = 0x80;
 119              		.loc 1 35 0
 120 0054 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 121 0058 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 122 005c 4FF08002 		mov	r2, #128
 123 0060 5A70     		strb	r2, [r3, #1]
  36:../src/sensors.c **** 		masterSend(MPU6000_ADDRESS, I2C2_DMABufTX, 2);
 124              		.loc 1 36 0
 125 0062 4FF0D000 		mov	r0, #208
 126 0066 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 127 006a C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 128 006e 4FF00202 		mov	r2, #2
 129 0072 FFF7FEFF 		bl	masterSend
  37:../src/sensors.c **** 		Delaynus(20000);
 130              		.loc 1 37 0
 131 0076 44F62060 		movw	r0, #20000
 132 007a FFF7FEFF 		bl	Delaynus
  38:../src/sensors.c **** 		I2C2_REENABLE = 1;
 133              		.loc 1 38 0
 134 007e 40F20003 		movw	r3, #:lower16:flag0
 135 0082 C0F20003 		movt	r3, #:upper16:flag0
 136 0086 1A78     		ldrb	r2, [r3, #0]
 137 0088 42F04002 		orr	r2, r2, #64
 138 008c 1A70     		strb	r2, [r3, #0]
 139              	.L2:
  39:../src/sensors.c **** 	}
  40:../src/sensors.c **** 	// Enable MPU
  41:../src/sensors.c **** 	MPU6000_Enable(ENABLE);
 140              		.loc 1 41 0
 141 008e 4FF00100 		mov	r0, #1
 142 0092 FFF7FEFF 		bl	MPU6000_Enable
  42:../src/sensors.c **** 	// Enable I2C bypass to write to HMC5883
  43:../src/sensors.c **** 	MPU6000_EnableI2CBypass(ENABLE);
 143              		.loc 1 43 0
 144 0096 4FF00100 		mov	r0, #1
 145 009a FFF7FEFF 		bl	MPU6000_EnableI2CBypass
  44:../src/sensors.c **** 	if(I2C2_REENABLE)
 146              		.loc 1 44 0
 147 009e 40F20003 		movw	r3, #:lower16:flag0
 148 00a2 C0F20003 		movt	r3, #:upper16:flag0
 149 00a6 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 150 00a8 03F04003 		and	r3, r3, #64
 151 00ac DBB2     		uxtb	r3, r3
 152 00ae 002B     		cmp	r3, #0
 153 00b0 1BD0     		beq	.L3
  45:../src/sensors.c **** 	{
  46:../src/sensors.c **** 		// Reset slave devices
  47:../src/sensors.c **** 		// MPL3115
  48:../src/sensors.c **** 		I2C2_DMABufTX[0] = 38;
 154              		.loc 1 48 0
 155 00b2 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 156 00b6 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 157 00ba 4FF02602 		mov	r2, #38
 158 00be 1A70     		strb	r2, [r3, #0]
  49:../src/sensors.c **** 		I2C2_DMABufTX[1] = 0x04;
 159              		.loc 1 49 0
 160 00c0 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 161 00c4 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 162 00c8 4FF00402 		mov	r2, #4
 163 00cc 5A70     		strb	r2, [r3, #1]
  50:../src/sensors.c **** 		masterSend(MPL3115A2_ADDRESS, I2C2_DMABufTX, 2);
 164              		.loc 1 50 0
 165 00ce 4FF0C000 		mov	r0, #192
 166 00d2 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 167 00d6 C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 168 00da 4FF00202 		mov	r2, #2
 169 00de FFF7FEFF 		bl	masterSend
  51:../src/sensors.c **** 		Delaynus(20000);
 170              		.loc 1 51 0
 171 00e2 44F62060 		movw	r0, #20000
 172 00e6 FFF7FEFF 		bl	Delaynus
 173              	.L3:
  52:../src/sensors.c **** 	}
  53:../src/sensors.c **** 	// Configure HMC5883
  54:../src/sensors.c **** 	HMC5883_Enable(ENABLE);
 174              		.loc 1 54 0
 175 00ea 4FF00100 		mov	r0, #1
 176 00ee FFF7FEFF 		bl	HMC5883_Enable
  55:../src/sensors.c **** 	// Configure MPL3115A2
  56:../src/sensors.c **** 	MPL3115A2_Enable(ENABLE);
 177              		.loc 1 56 0
 178 00f2 4FF00100 		mov	r0, #1
 179 00f6 FFF7FEFF 		bl	MPL3115A2_Enable
  57:../src/sensors.c **** 	// Disable I2C bypass
  58:../src/sensors.c **** 	MPU6000_EnableI2CBypass(DISABLE);
 180              		.loc 1 58 0
 181 00fa 4FF00000 		mov	r0, #0
 182 00fe FFF7FEFF 		bl	MPU6000_EnableI2CBypass
  59:../src/sensors.c **** 	// Configure MPU I2C master mode
  60:../src/sensors.c **** 	MPU6000_ConfigureI2CMaster();
 183              		.loc 1 60 0
 184 0102 FFF7FEFF 		bl	MPU6000_ConfigureI2CMaster
  61:../src/sensors.c **** 	// Enable MPU I2C master
  62:../src/sensors.c **** 	MPU6000_EnableI2CMaster(ENABLE);
 185              		.loc 1 62 0
 186 0106 4FF00100 		mov	r0, #1
 187 010a FFF7FEFF 		bl	MPU6000_EnableI2CMaster
  63:../src/sensors.c **** 	I2C2_INITDONE = 1;
 188              		.loc 1 63 0
 189 010e 40F20003 		movw	r3, #:lower16:flag0
 190 0112 C0F20003 		movt	r3, #:upper16:flag0
 191 0116 1A78     		ldrb	r2, [r3, #0]
 192 0118 42F01002 		orr	r2, r2, #16
 193 011c 1A70     		strb	r2, [r3, #0]
  64:../src/sensors.c **** }
 194              		.loc 1 64 0
 195 011e 80BD     		pop	{r7, pc}
 196              		.cfi_endproc
 197              	.LFE110:
 199              		.align	2
 200              		.global	copySensorData
 201              		.thumb
 202              		.thumb_func
 204              	copySensorData:
 205              	.LFB111:
  65:../src/sensors.c **** 
  66:../src/sensors.c **** // Copies sensor data from I2C to variables
  67:../src/sensors.c **** void copySensorData(void)
  68:../src/sensors.c **** {
 206              		.loc 1 68 0
 207              		.cfi_startproc
 208              		@ args = 0, pretend = 0, frame = 8
 209              		@ frame_needed = 1, uses_anonymous_args = 0
 210              		@ link register save eliminated.
 211 0120 80B4     		push	{r7}
 212              	.LCFI2:
 213              		.cfi_def_cfa_offset 4
 214              		.cfi_offset 7, -4
 215 0122 83B0     		sub	sp, sp, #12
 216              	.LCFI3:
 217              		.cfi_def_cfa_offset 16
 218 0124 00AF     		add	r7, sp, #0
 219              	.LCFI4:
 220              		.cfi_def_cfa_register 7
  69:../src/sensors.c **** 	uint16_t uiTemp = 0;
 221              		.loc 1 69 0
 222 0126 4FF00003 		mov	r3, #0
 223 012a FB80     		strh	r3, [r7, #6]	@ movhi
  70:../src/sensors.c **** 	// Data is in I2C2_DMABufRX
  71:../src/sensors.c **** 	// Starts with reg 59, accel X high
  72:../src/sensors.c **** 	ACC_X = (I2C2_DMABufRX[0] << 8) & 0xff00;
 224              		.loc 1 72 0
 225 012c 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 226 0130 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 227 0134 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 228 0136 4FEA0323 		lsl	r3, r3, #8
 229 013a 9AB2     		uxth	r2, r3
 230 013c 40F20003 		movw	r3, #:lower16:MODBUSReg
 231 0140 C0F20003 		movt	r3, #:upper16:MODBUSReg
 232 0144 A3F84620 		strh	r2, [r3, #70]	@ movhi
  73:../src/sensors.c **** 	ACC_X = ACC_X | (I2C2_DMABufRX[1] & 0x00ff);
 233              		.loc 1 73 0
 234 0148 40F20003 		movw	r3, #:lower16:MODBUSReg
 235 014c C0F20003 		movt	r3, #:upper16:MODBUSReg
 236 0150 B3F84620 		ldrh	r2, [r3, #70]
 237 0154 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 238 0158 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 239 015c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 240 015e 1343     		orrs	r3, r3, r2
 241 0160 9AB2     		uxth	r2, r3
 242 0162 40F20003 		movw	r3, #:lower16:MODBUSReg
 243 0166 C0F20003 		movt	r3, #:upper16:MODBUSReg
 244 016a A3F84620 		strh	r2, [r3, #70]	@ movhi
  74:../src/sensors.c **** 	ACC_Y = (I2C2_DMABufRX[2] << 8) & 0xff00;
 245              		.loc 1 74 0
 246 016e 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 247 0172 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 248 0176 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 249 0178 4FEA0323 		lsl	r3, r3, #8
 250 017c 9AB2     		uxth	r2, r3
 251 017e 40F20003 		movw	r3, #:lower16:MODBUSReg
 252 0182 C0F20003 		movt	r3, #:upper16:MODBUSReg
 253 0186 A3F84820 		strh	r2, [r3, #72]	@ movhi
  75:../src/sensors.c **** 	ACC_Y = ACC_Y | (I2C2_DMABufRX[3] & 0x00ff);
 254              		.loc 1 75 0
 255 018a 40F20003 		movw	r3, #:lower16:MODBUSReg
 256 018e C0F20003 		movt	r3, #:upper16:MODBUSReg
 257 0192 B3F84820 		ldrh	r2, [r3, #72]
 258 0196 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 259 019a C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 260 019e DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 261 01a0 1343     		orrs	r3, r3, r2
 262 01a2 9AB2     		uxth	r2, r3
 263 01a4 40F20003 		movw	r3, #:lower16:MODBUSReg
 264 01a8 C0F20003 		movt	r3, #:upper16:MODBUSReg
 265 01ac A3F84820 		strh	r2, [r3, #72]	@ movhi
  76:../src/sensors.c **** 	ACC_Z = (I2C2_DMABufRX[4] << 8) & 0xff00;
 266              		.loc 1 76 0
 267 01b0 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 268 01b4 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 269 01b8 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 270 01ba 4FEA0323 		lsl	r3, r3, #8
 271 01be 9AB2     		uxth	r2, r3
 272 01c0 40F20003 		movw	r3, #:lower16:MODBUSReg
 273 01c4 C0F20003 		movt	r3, #:upper16:MODBUSReg
 274 01c8 A3F84A20 		strh	r2, [r3, #74]	@ movhi
  77:../src/sensors.c **** 	ACC_Z = ACC_Z | (I2C2_DMABufRX[5] & 0x00ff);
 275              		.loc 1 77 0
 276 01cc 40F20003 		movw	r3, #:lower16:MODBUSReg
 277 01d0 C0F20003 		movt	r3, #:upper16:MODBUSReg
 278 01d4 B3F84A20 		ldrh	r2, [r3, #74]
 279 01d8 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 280 01dc C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 281 01e0 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 282 01e2 1343     		orrs	r3, r3, r2
 283 01e4 9AB2     		uxth	r2, r3
 284 01e6 40F20003 		movw	r3, #:lower16:MODBUSReg
 285 01ea C0F20003 		movt	r3, #:upper16:MODBUSReg
 286 01ee A3F84A20 		strh	r2, [r3, #74]	@ movhi
  78:../src/sensors.c **** 	// Reg 65,66(6,7) is IC temperature
  79:../src/sensors.c **** 	// Reg 67, 72 (8,13)is gyro
  80:../src/sensors.c **** 	GYRO_X = (I2C2_DMABufRX[8] << 8) & 0xff00;
 287              		.loc 1 80 0
 288 01f2 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 289 01f6 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 290 01fa 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 291 01fc 4FEA0323 		lsl	r3, r3, #8
 292 0200 9AB2     		uxth	r2, r3
 293 0202 40F20003 		movw	r3, #:lower16:MODBUSReg
 294 0206 C0F20003 		movt	r3, #:upper16:MODBUSReg
 295 020a A3F85220 		strh	r2, [r3, #82]	@ movhi
  81:../src/sensors.c **** 	GYRO_X = GYRO_X | (I2C2_DMABufRX[9] & 0x00ff);
 296              		.loc 1 81 0
 297 020e 40F20003 		movw	r3, #:lower16:MODBUSReg
 298 0212 C0F20003 		movt	r3, #:upper16:MODBUSReg
 299 0216 B3F85220 		ldrh	r2, [r3, #82]
 300 021a 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 301 021e C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 302 0222 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 303 0224 1343     		orrs	r3, r3, r2
 304 0226 9AB2     		uxth	r2, r3
 305 0228 40F20003 		movw	r3, #:lower16:MODBUSReg
 306 022c C0F20003 		movt	r3, #:upper16:MODBUSReg
 307 0230 A3F85220 		strh	r2, [r3, #82]	@ movhi
  82:../src/sensors.c **** 	GYRO_Y = (I2C2_DMABufRX[10] << 8) & 0xff00;
 308              		.loc 1 82 0
 309 0234 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 310 0238 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 311 023c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 312 023e 4FEA0323 		lsl	r3, r3, #8
 313 0242 9AB2     		uxth	r2, r3
 314 0244 40F20003 		movw	r3, #:lower16:MODBUSReg
 315 0248 C0F20003 		movt	r3, #:upper16:MODBUSReg
 316 024c A3F85420 		strh	r2, [r3, #84]	@ movhi
  83:../src/sensors.c **** 	GYRO_Y = GYRO_Y | (I2C2_DMABufRX[11] & 0x00ff);
 317              		.loc 1 83 0
 318 0250 40F20003 		movw	r3, #:lower16:MODBUSReg
 319 0254 C0F20003 		movt	r3, #:upper16:MODBUSReg
 320 0258 B3F85420 		ldrh	r2, [r3, #84]
 321 025c 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 322 0260 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 323 0264 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 324 0266 1343     		orrs	r3, r3, r2
 325 0268 9AB2     		uxth	r2, r3
 326 026a 40F20003 		movw	r3, #:lower16:MODBUSReg
 327 026e C0F20003 		movt	r3, #:upper16:MODBUSReg
 328 0272 A3F85420 		strh	r2, [r3, #84]	@ movhi
  84:../src/sensors.c **** 	GYRO_Z = (I2C2_DMABufRX[12] << 8) & 0xff00;
 329              		.loc 1 84 0
 330 0276 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 331 027a C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 332 027e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 333 0280 4FEA0323 		lsl	r3, r3, #8
 334 0284 9AB2     		uxth	r2, r3
 335 0286 40F20003 		movw	r3, #:lower16:MODBUSReg
 336 028a C0F20003 		movt	r3, #:upper16:MODBUSReg
 337 028e A3F85620 		strh	r2, [r3, #86]	@ movhi
  85:../src/sensors.c **** 	GYRO_Z = GYRO_Z | (I2C2_DMABufRX[13] & 0x00ff);
 338              		.loc 1 85 0
 339 0292 40F20003 		movw	r3, #:lower16:MODBUSReg
 340 0296 C0F20003 		movt	r3, #:upper16:MODBUSReg
 341 029a B3F85620 		ldrh	r2, [r3, #86]
 342 029e 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 343 02a2 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 344 02a6 5B7B     		ldrb	r3, [r3, #13]	@ zero_extendqisi2
 345 02a8 1343     		orrs	r3, r3, r2
 346 02aa 9AB2     		uxth	r2, r3
 347 02ac 40F20003 		movw	r3, #:lower16:MODBUSReg
 348 02b0 C0F20003 		movt	r3, #:upper16:MODBUSReg
 349 02b4 A3F85620 		strh	r2, [r3, #86]	@ movhi
  86:../src/sensors.c **** 	// Reg 73,78 (14,19) is mag data
  87:../src/sensors.c **** 	MAG_X = (I2C2_DMABufRX[14] << 8) & 0xff00;
 350              		.loc 1 87 0
 351 02b8 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 352 02bc C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 353 02c0 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 354 02c2 4FEA0323 		lsl	r3, r3, #8
 355 02c6 9AB2     		uxth	r2, r3
 356 02c8 40F20003 		movw	r3, #:lower16:MODBUSReg
 357 02cc C0F20003 		movt	r3, #:upper16:MODBUSReg
 358 02d0 A3F84C20 		strh	r2, [r3, #76]	@ movhi
  88:../src/sensors.c **** 	MAG_X = MAG_X | (I2C2_DMABufRX[15] & 0x00ff);
 359              		.loc 1 88 0
 360 02d4 40F20003 		movw	r3, #:lower16:MODBUSReg
 361 02d8 C0F20003 		movt	r3, #:upper16:MODBUSReg
 362 02dc B3F84C20 		ldrh	r2, [r3, #76]
 363 02e0 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 364 02e4 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 365 02e8 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 366 02ea 1343     		orrs	r3, r3, r2
 367 02ec 9AB2     		uxth	r2, r3
 368 02ee 40F20003 		movw	r3, #:lower16:MODBUSReg
 369 02f2 C0F20003 		movt	r3, #:upper16:MODBUSReg
 370 02f6 A3F84C20 		strh	r2, [r3, #76]	@ movhi
  89:../src/sensors.c **** 	MAG_Y = (I2C2_DMABufRX[16] << 8) & 0xff00;
 371              		.loc 1 89 0
 372 02fa 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 373 02fe C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 374 0302 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 375 0304 4FEA0323 		lsl	r3, r3, #8
 376 0308 9AB2     		uxth	r2, r3
 377 030a 40F20003 		movw	r3, #:lower16:MODBUSReg
 378 030e C0F20003 		movt	r3, #:upper16:MODBUSReg
 379 0312 A3F84E20 		strh	r2, [r3, #78]	@ movhi
  90:../src/sensors.c **** 	MAG_Y = MAG_Y | (I2C2_DMABufRX[17] & 0x00ff);
 380              		.loc 1 90 0
 381 0316 40F20003 		movw	r3, #:lower16:MODBUSReg
 382 031a C0F20003 		movt	r3, #:upper16:MODBUSReg
 383 031e B3F84E20 		ldrh	r2, [r3, #78]
 384 0322 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 385 0326 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 386 032a 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 387 032c 1343     		orrs	r3, r3, r2
 388 032e 9AB2     		uxth	r2, r3
 389 0330 40F20003 		movw	r3, #:lower16:MODBUSReg
 390 0334 C0F20003 		movt	r3, #:upper16:MODBUSReg
 391 0338 A3F84E20 		strh	r2, [r3, #78]	@ movhi
  91:../src/sensors.c **** 	MAG_Z = (I2C2_DMABufRX[18] << 8) & 0xff00;
 392              		.loc 1 91 0
 393 033c 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 394 0340 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 395 0344 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 396 0346 4FEA0323 		lsl	r3, r3, #8
 397 034a 9AB2     		uxth	r2, r3
 398 034c 40F20003 		movw	r3, #:lower16:MODBUSReg
 399 0350 C0F20003 		movt	r3, #:upper16:MODBUSReg
 400 0354 A3F85020 		strh	r2, [r3, #80]	@ movhi
  92:../src/sensors.c **** 	MAG_Z = MAG_Z | (I2C2_DMABufRX[19] & 0x00ff);
 401              		.loc 1 92 0
 402 0358 40F20003 		movw	r3, #:lower16:MODBUSReg
 403 035c C0F20003 		movt	r3, #:upper16:MODBUSReg
 404 0360 B3F85020 		ldrh	r2, [r3, #80]
 405 0364 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 406 0368 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 407 036c DB7C     		ldrb	r3, [r3, #19]	@ zero_extendqisi2
 408 036e 1343     		orrs	r3, r3, r2
 409 0370 9AB2     		uxth	r2, r3
 410 0372 40F20003 		movw	r3, #:lower16:MODBUSReg
 411 0376 C0F20003 		movt	r3, #:upper16:MODBUSReg
 412 037a A3F85020 		strh	r2, [r3, #80]	@ movhi
  93:../src/sensors.c **** 	// Reg 79,80 (20,21) is barometer data
  94:../src/sensors.c **** 	BARO = (I2C2_DMABufRX[20] << 8) & 0xff00;
 413              		.loc 1 94 0
 414 037e 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 415 0382 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 416 0386 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 417 0388 4FEA0323 		lsl	r3, r3, #8
 418 038c 9AB2     		uxth	r2, r3
 419 038e 40F20003 		movw	r3, #:lower16:MODBUSReg
 420 0392 C0F20003 		movt	r3, #:upper16:MODBUSReg
 421 0396 A3F85820 		strh	r2, [r3, #88]	@ movhi
  95:../src/sensors.c **** 	BARO = BARO | (I2C2_DMABufRX[21] & 0x00ff);
 422              		.loc 1 95 0
 423 039a 40F20003 		movw	r3, #:lower16:MODBUSReg
 424 039e C0F20003 		movt	r3, #:upper16:MODBUSReg
 425 03a2 B3F85820 		ldrh	r2, [r3, #88]
 426 03a6 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 427 03aa C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 428 03ae 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
 429 03b0 1343     		orrs	r3, r3, r2
 430 03b2 9AB2     		uxth	r2, r3
 431 03b4 40F20003 		movw	r3, #:lower16:MODBUSReg
 432 03b8 C0F20003 		movt	r3, #:upper16:MODBUSReg
 433 03bc A3F85820 		strh	r2, [r3, #88]	@ movhi
  96:../src/sensors.c **** 	BARO = BARO * 10;
 434              		.loc 1 96 0
 435 03c0 40F20003 		movw	r3, #:lower16:MODBUSReg
 436 03c4 C0F20003 		movt	r3, #:upper16:MODBUSReg
 437 03c8 B3F85830 		ldrh	r3, [r3, #88]
 438 03cc 1A46     		mov	r2, r3	@ movhi
 439 03ce 4FEA8202 		lsl	r2, r2, #2
 440 03d2 D318     		adds	r3, r2, r3
 441 03d4 4FEA4303 		lsl	r3, r3, #1
 442 03d8 9AB2     		uxth	r2, r3
 443 03da 40F20003 		movw	r3, #:lower16:MODBUSReg
 444 03de C0F20003 		movt	r3, #:upper16:MODBUSReg
 445 03e2 A3F85820 		strh	r2, [r3, #88]	@ movhi
  97:../src/sensors.c **** 	uiTemp = I2C2_DMABufRX[22];
 446              		.loc 1 97 0
 447 03e6 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 448 03ea C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 449 03ee 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 450 03f0 FB80     		strh	r3, [r7, #6]	@ movhi
  98:../src/sensors.c **** 	uiTemp = uiTemp >> 4;
 451              		.loc 1 98 0
 452 03f2 FB88     		ldrh	r3, [r7, #6]
 453 03f4 4FEA1313 		lsr	r3, r3, #4
 454 03f8 FB80     		strh	r3, [r7, #6]	@ movhi
  99:../src/sensors.c **** 	uiTemp = uiTemp & 0x000F;
 455              		.loc 1 99 0
 456 03fa FB88     		ldrh	r3, [r7, #6]	@ movhi
 457 03fc 03F00F03 		and	r3, r3, #15
 458 0400 FB80     		strh	r3, [r7, #6]	@ movhi
 100:../src/sensors.c **** 	BARO = BARO + uiTemp;
 459              		.loc 1 100 0
 460 0402 40F20003 		movw	r3, #:lower16:MODBUSReg
 461 0406 C0F20003 		movt	r3, #:upper16:MODBUSReg
 462 040a B3F85820 		ldrh	r2, [r3, #88]
 463 040e FB88     		ldrh	r3, [r7, #6]	@ movhi
 464 0410 D318     		adds	r3, r2, r3
 465 0412 9AB2     		uxth	r2, r3
 466 0414 40F20003 		movw	r3, #:lower16:MODBUSReg
 467 0418 C0F20003 		movt	r3, #:upper16:MODBUSReg
 468 041c A3F85820 		strh	r2, [r3, #88]	@ movhi
 101:../src/sensors.c **** }
 469              		.loc 1 101 0
 470 0420 07F10C07 		add	r7, r7, #12
 471 0424 BD46     		mov	sp, r7
 472 0426 80BC     		pop	{r7}
 473 0428 7047     		bx	lr
 474              		.cfi_endproc
 475              	.LFE111:
 477 042a 00BF     		.align	2
 478              		.global	MPU6000_Enable
 479              		.thumb
 480              		.thumb_func
 482              	MPU6000_Enable:
 483              	.LFB112:
 102:../src/sensors.c **** 
 103:../src/sensors.c **** ErrorStatus MPU6000_Enable(FunctionalState newState)
 104:../src/sensors.c **** {
 484              		.loc 1 104 0
 485              		.cfi_startproc
 486              		@ args = 0, pretend = 0, frame = 16
 487              		@ frame_needed = 1, uses_anonymous_args = 0
 488 042c 80B5     		push	{r7, lr}
 489              	.LCFI5:
 490              		.cfi_def_cfa_offset 8
 491              		.cfi_offset 14, -4
 492              		.cfi_offset 7, -8
 493 042e 84B0     		sub	sp, sp, #16
 494              	.LCFI6:
 495              		.cfi_def_cfa_offset 24
 496 0430 00AF     		add	r7, sp, #0
 497              	.LCFI7:
 498              		.cfi_def_cfa_register 7
 499 0432 0346     		mov	r3, r0
 500 0434 FB71     		strb	r3, [r7, #7]
 105:../src/sensors.c **** 	ErrorStatus error = ERROR;
 501              		.loc 1 105 0
 502 0436 4FF00003 		mov	r3, #0
 503 043a FB73     		strb	r3, [r7, #15]
 106:../src/sensors.c **** 	uint8_t ui8RegState = 0;
 504              		.loc 1 106 0
 505 043c 4FF00003 		mov	r3, #0
 506 0440 BB73     		strb	r3, [r7, #14]
 107:../src/sensors.c **** 	masterReceive(MPU6000_ADDRESS, 107, I2C2_DMABufRX, 5);
 507              		.loc 1 107 0
 508 0442 4FF0D000 		mov	r0, #208
 509 0446 4FF06B01 		mov	r1, #107
 510 044a 40F20002 		movw	r2, #:lower16:I2C2_DMABufRX
 511 044e C0F20002 		movt	r2, #:upper16:I2C2_DMABufRX
 512 0452 4FF00503 		mov	r3, #5
 513 0456 FFF7FEFF 		bl	masterReceive
 108:../src/sensors.c **** 	ui8RegState = I2C2_DMABufRX[0];
 514              		.loc 1 108 0
 515 045a 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 516 045e C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 517 0462 1B78     		ldrb	r3, [r3, #0]
 518 0464 BB73     		strb	r3, [r7, #14]
 109:../src/sensors.c **** 
 110:../src/sensors.c **** 	I2C2_DMABufTX[0] = 107;
 519              		.loc 1 110 0
 520 0466 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 521 046a C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 522 046e 4FF06B02 		mov	r2, #107
 523 0472 1A70     		strb	r2, [r3, #0]
 111:../src/sensors.c **** 	if(newState == ENABLE)
 524              		.loc 1 111 0
 525 0474 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 526 0476 012B     		cmp	r3, #1
 527 0478 0DD1     		bne	.L6
 112:../src/sensors.c **** 	{
 113:../src/sensors.c **** 		// Set power = ON with clock source = X axis gyro
 114:../src/sensors.c **** 		ui8RegState = ui8RegState & ~_BIT6;
 528              		.loc 1 114 0
 529 047a BB7B     		ldrb	r3, [r7, #14]
 530 047c 23F04003 		bic	r3, r3, #64
 531 0480 BB73     		strb	r3, [r7, #14]
 115:../src/sensors.c **** 		I2C2_DMABufTX[1] = ui8RegState | 0x01;
 532              		.loc 1 115 0
 533 0482 BB7B     		ldrb	r3, [r7, #14]
 534 0484 43F00103 		orr	r3, r3, #1
 535 0488 DAB2     		uxtb	r2, r3
 536 048a 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 537 048e C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 538 0492 5A70     		strb	r2, [r3, #1]
 539 0494 08E0     		b	.L7
 540              	.L6:
 116:../src/sensors.c **** 	}
 117:../src/sensors.c **** 	else
 118:../src/sensors.c **** 	{
 119:../src/sensors.c **** 		// Set device to sleep
 120:../src/sensors.c **** 		I2C2_DMABufTX[1] = ui8RegState | 0x40;
 541              		.loc 1 120 0
 542 0496 BB7B     		ldrb	r3, [r7, #14]
 543 0498 43F04003 		orr	r3, r3, #64
 544 049c DAB2     		uxtb	r2, r3
 545 049e 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 546 04a2 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 547 04a6 5A70     		strb	r2, [r3, #1]
 548              	.L7:
 121:../src/sensors.c **** 	}
 122:../src/sensors.c **** 	masterSend(MPU6000_ADDRESS, I2C2_DMABufTX, 2);
 549              		.loc 1 122 0
 550 04a8 4FF0D000 		mov	r0, #208
 551 04ac 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 552 04b0 C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 553 04b4 4FF00202 		mov	r2, #2
 554 04b8 FFF7FEFF 		bl	masterSend
 123:../src/sensors.c **** 	Delaynus(2000);
 555              		.loc 1 123 0
 556 04bc 4FF4FA60 		mov	r0, #2000
 557 04c0 FFF7FEFF 		bl	Delaynus
 124:../src/sensors.c **** 	// Configure sensors
 125:../src/sensors.c **** 	// Register 26
 126:../src/sensors.c **** 	I2C2_DMABufTX[0] = 26;
 558              		.loc 1 126 0
 559 04c4 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 560 04c8 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 561 04cc 4FF01A02 		mov	r2, #26
 562 04d0 1A70     		strb	r2, [r3, #0]
 127:../src/sensors.c **** 	// Reg 26 = 0000 0010	Set low pass filter to 94 Hz
 128:../src/sensors.c **** 	I2C2_DMABufTX[1] = 0x02;
 563              		.loc 1 128 0
 564 04d2 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 565 04d6 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 566 04da 4FF00202 		mov	r2, #2
 567 04de 5A70     		strb	r2, [r3, #1]
 129:../src/sensors.c **** 	// Reg 27 = 0001 0000	Set gyro maximum rate at 1000 °/sec
 130:../src/sensors.c **** 	I2C2_DMABufTX[2] = 0x10;
 568              		.loc 1 130 0
 569 04e0 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 570 04e4 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 571 04e8 4FF01002 		mov	r2, #16
 572 04ec 9A70     		strb	r2, [r3, #2]
 131:../src/sensors.c **** 	// Reg 28 = 0001 0000	Set accel maximum rate at 8g
 132:../src/sensors.c **** 	I2C2_DMABufTX[3] = 0x10;
 573              		.loc 1 132 0
 574 04ee 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 575 04f2 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 576 04f6 4FF01002 		mov	r2, #16
 577 04fa DA70     		strb	r2, [r3, #3]
 133:../src/sensors.c **** 	masterSend(MPU6000_ADDRESS, I2C2_DMABufTX, 4);
 578              		.loc 1 133 0
 579 04fc 4FF0D000 		mov	r0, #208
 580 0500 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 581 0504 C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 582 0508 4FF00402 		mov	r2, #4
 583 050c FFF7FEFF 		bl	masterSend
 134:../src/sensors.c **** 	Delaynus(20000);
 584              		.loc 1 134 0
 585 0510 44F62060 		movw	r0, #20000
 586 0514 FFF7FEFF 		bl	Delaynus
 135:../src/sensors.c **** 
 136:../src/sensors.c **** 	return  error;
 587              		.loc 1 136 0
 588 0518 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 137:../src/sensors.c **** }
 589              		.loc 1 137 0
 590 051a 1846     		mov	r0, r3
 591 051c 07F11007 		add	r7, r7, #16
 592 0520 BD46     		mov	sp, r7
 593 0522 80BD     		pop	{r7, pc}
 594              		.cfi_endproc
 595              	.LFE112:
 597              		.align	2
 598              		.global	MPU6000_EnableI2CBypass
 599              		.thumb
 600              		.thumb_func
 602              	MPU6000_EnableI2CBypass:
 603              	.LFB113:
 138:../src/sensors.c **** 
 139:../src/sensors.c **** ErrorStatus MPU6000_EnableI2CBypass(FunctionalState newState)
 140:../src/sensors.c **** {
 604              		.loc 1 140 0
 605              		.cfi_startproc
 606              		@ args = 0, pretend = 0, frame = 16
 607              		@ frame_needed = 1, uses_anonymous_args = 0
 608 0524 80B5     		push	{r7, lr}
 609              	.LCFI8:
 610              		.cfi_def_cfa_offset 8
 611              		.cfi_offset 14, -4
 612              		.cfi_offset 7, -8
 613 0526 84B0     		sub	sp, sp, #16
 614              	.LCFI9:
 615              		.cfi_def_cfa_offset 24
 616 0528 00AF     		add	r7, sp, #0
 617              	.LCFI10:
 618              		.cfi_def_cfa_register 7
 619 052a 0346     		mov	r3, r0
 620 052c FB71     		strb	r3, [r7, #7]
 141:../src/sensors.c **** 	ErrorStatus error = ERROR;
 621              		.loc 1 141 0
 622 052e 4FF00003 		mov	r3, #0
 623 0532 FB73     		strb	r3, [r7, #15]
 142:../src/sensors.c **** 	uint8_t ui8RegState = 0;
 624              		.loc 1 142 0
 625 0534 4FF00003 		mov	r3, #0
 626 0538 BB73     		strb	r3, [r7, #14]
 143:../src/sensors.c **** 	masterReceive(MPU6000_ADDRESS, 55, I2C2_DMABufRX, 5);
 627              		.loc 1 143 0
 628 053a 4FF0D000 		mov	r0, #208
 629 053e 4FF03701 		mov	r1, #55
 630 0542 40F20002 		movw	r2, #:lower16:I2C2_DMABufRX
 631 0546 C0F20002 		movt	r2, #:upper16:I2C2_DMABufRX
 632 054a 4FF00503 		mov	r3, #5
 633 054e FFF7FEFF 		bl	masterReceive
 144:../src/sensors.c **** 	ui8RegState = I2C2_DMABufRX[0];
 634              		.loc 1 144 0
 635 0552 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 636 0556 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 637 055a 1B78     		ldrb	r3, [r3, #0]
 638 055c BB73     		strb	r3, [r7, #14]
 145:../src/sensors.c **** 
 146:../src/sensors.c **** 	I2C2_DMABufTX[0] = 55;
 639              		.loc 1 146 0
 640 055e 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 641 0562 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 642 0566 4FF03702 		mov	r2, #55
 643 056a 1A70     		strb	r2, [r3, #0]
 147:../src/sensors.c **** 	if(newState == ENABLE)
 644              		.loc 1 147 0
 645 056c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 646 056e 012B     		cmp	r3, #1
 647 0570 09D1     		bne	.L9
 148:../src/sensors.c **** 	{
 149:../src/sensors.c ****     	I2C2_DMABufTX[1] = ui8RegState | 0x02;
 648              		.loc 1 149 0
 649 0572 BB7B     		ldrb	r3, [r7, #14]
 650 0574 43F00203 		orr	r3, r3, #2
 651 0578 DAB2     		uxtb	r2, r3
 652 057a 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 653 057e C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 654 0582 5A70     		strb	r2, [r3, #1]
 655 0584 08E0     		b	.L10
 656              	.L9:
 150:../src/sensors.c **** 	}
 151:../src/sensors.c **** 	else
 152:../src/sensors.c **** 	{
 153:../src/sensors.c **** 		I2C2_DMABufTX[1] = ui8RegState & ~0x02;
 657              		.loc 1 153 0
 658 0586 BB7B     		ldrb	r3, [r7, #14]
 659 0588 23F00203 		bic	r3, r3, #2
 660 058c DAB2     		uxtb	r2, r3
 661 058e 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 662 0592 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 663 0596 5A70     		strb	r2, [r3, #1]
 664              	.L10:
 154:../src/sensors.c **** 	}
 155:../src/sensors.c **** 	masterSend(MPU6000_ADDRESS, I2C2_DMABufTX, 2);
 665              		.loc 1 155 0
 666 0598 4FF0D000 		mov	r0, #208
 667 059c 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 668 05a0 C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 669 05a4 4FF00202 		mov	r2, #2
 670 05a8 FFF7FEFF 		bl	masterSend
 156:../src/sensors.c **** 	Delaynus(20000);
 671              		.loc 1 156 0
 672 05ac 44F62060 		movw	r0, #20000
 673 05b0 FFF7FEFF 		bl	Delaynus
 157:../src/sensors.c **** 	return  error;
 674              		.loc 1 157 0
 675 05b4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 158:../src/sensors.c **** }
 676              		.loc 1 158 0
 677 05b6 1846     		mov	r0, r3
 678 05b8 07F11007 		add	r7, r7, #16
 679 05bc BD46     		mov	sp, r7
 680 05be 80BD     		pop	{r7, pc}
 681              		.cfi_endproc
 682              	.LFE113:
 684              		.align	2
 685              		.global	MPU6000_ConfigureI2CMaster
 686              		.thumb
 687              		.thumb_func
 689              	MPU6000_ConfigureI2CMaster:
 690              	.LFB114:
 159:../src/sensors.c **** 
 160:../src/sensors.c **** ErrorStatus MPU6000_ConfigureI2CMaster(void)
 161:../src/sensors.c **** {
 691              		.loc 1 161 0
 692              		.cfi_startproc
 693              		@ args = 0, pretend = 0, frame = 8
 694              		@ frame_needed = 1, uses_anonymous_args = 0
 695 05c0 80B5     		push	{r7, lr}
 696              	.LCFI11:
 697              		.cfi_def_cfa_offset 8
 698              		.cfi_offset 14, -4
 699              		.cfi_offset 7, -8
 700 05c2 82B0     		sub	sp, sp, #8
 701              	.LCFI12:
 702              		.cfi_def_cfa_offset 16
 703 05c4 00AF     		add	r7, sp, #0
 704              	.LCFI13:
 705              		.cfi_def_cfa_register 7
 162:../src/sensors.c **** 	ErrorStatus error = ERROR;
 706              		.loc 1 162 0
 707 05c6 4FF00003 		mov	r3, #0
 708 05ca FB71     		strb	r3, [r7, #7]
 163:../src/sensors.c **** 	// Start with reg 36
 164:../src/sensors.c **** 	I2C2_DMABufTX[0] = 36;
 709              		.loc 1 164 0
 710 05cc 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 711 05d0 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 712 05d4 4FF02402 		mov	r2, #36
 713 05d8 1A70     		strb	r2, [r3, #0]
 165:../src/sensors.c **** 	// I2C master control = 0101 1101; last four bits = I2C clock = 400 kHz
 166:../src/sensors.c **** 	I2C2_DMABufTX[1] = 0x5d;
 714              		.loc 1 166 0
 715 05da 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 716 05de C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 717 05e2 4FF05D02 		mov	r2, #93
 718 05e6 5A70     		strb	r2, [r3, #1]
 167:../src/sensors.c **** 	// Registers 37 - 39 - master 0 control
 168:../src/sensors.c **** 	// 37 - I2C_SLV0_ADDR = 1001 1110
 169:../src/sensors.c **** 	I2C2_DMABufTX[2] = 0x9E;
 719              		.loc 1 169 0
 720 05e8 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 721 05ec C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 722 05f0 4FF09E02 		mov	r2, #158
 723 05f4 9A70     		strb	r2, [r3, #2]
 170:../src/sensors.c **** 	// 38 - I2C_SLV0_REG - start read at this reg
 171:../src/sensors.c **** 	I2C2_DMABufTX[3] = 0x03;
 724              		.loc 1 171 0
 725 05f6 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 726 05fa C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 727 05fe 4FF00302 		mov	r2, #3
 728 0602 DA70     		strb	r2, [r3, #3]
 172:../src/sensors.c **** 	// 39 - I2C_SLV0_CTRL = 1000 0110
 173:../src/sensors.c **** 	I2C2_DMABufTX[4] = 0x86;
 729              		.loc 1 173 0
 730 0604 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 731 0608 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 732 060c 4FF08602 		mov	r2, #134
 733 0610 1A71     		strb	r2, [r3, #4]
 174:../src/sensors.c **** 	// Registers 40 - 42 - master 1 control
 175:../src/sensors.c **** 	// 40 - I2C SLV1_ADDR = 1110 0000
 176:../src/sensors.c **** 	I2C2_DMABufTX[5] = 0xE0;
 734              		.loc 1 176 0
 735 0612 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 736 0616 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 737 061a 4FF0E002 		mov	r2, #224
 738 061e 5A71     		strb	r2, [r3, #5]
 177:../src/sensors.c **** 	// 41 = I2C_SLV1_REG - start read at this reg
 178:../src/sensors.c **** 	I2C2_DMABufTX[6] = 0x01;
 739              		.loc 1 178 0
 740 0620 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 741 0624 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 742 0628 4FF00102 		mov	r2, #1
 743 062c 9A71     		strb	r2, [r3, #6]
 179:../src/sensors.c **** 	// 42 - I2C_SLV1_CTRL = 1000 0011
 180:../src/sensors.c **** 	I2C2_DMABufTX[7] = 0x83;
 744              		.loc 1 180 0
 745 062e 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 746 0632 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 747 0636 4FF08302 		mov	r2, #131
 748 063a DA71     		strb	r2, [r3, #7]
 181:../src/sensors.c **** 	masterSend(MPU6000_ADDRESS, I2C2_DMABufTX, 8);
 749              		.loc 1 181 0
 750 063c 4FF0D000 		mov	r0, #208
 751 0640 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 752 0644 C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 753 0648 4FF00802 		mov	r2, #8
 754 064c FFF7FEFF 		bl	masterSend
 182:../src/sensors.c **** 	Delaynus(20000);
 755              		.loc 1 182 0
 756 0650 44F62060 		movw	r0, #20000
 757 0654 FFF7FEFF 		bl	Delaynus
 183:../src/sensors.c **** 	return  error;
 758              		.loc 1 183 0
 759 0658 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 184:../src/sensors.c **** }
 760              		.loc 1 184 0
 761 065a 1846     		mov	r0, r3
 762 065c 07F10807 		add	r7, r7, #8
 763 0660 BD46     		mov	sp, r7
 764 0662 80BD     		pop	{r7, pc}
 765              		.cfi_endproc
 766              	.LFE114:
 768              		.align	2
 769              		.global	MPU6000_EnableI2CMaster
 770              		.thumb
 771              		.thumb_func
 773              	MPU6000_EnableI2CMaster:
 774              	.LFB115:
 185:../src/sensors.c **** 
 186:../src/sensors.c **** ErrorStatus MPU6000_EnableI2CMaster(FunctionalState newState)
 187:../src/sensors.c **** {
 775              		.loc 1 187 0
 776              		.cfi_startproc
 777              		@ args = 0, pretend = 0, frame = 16
 778              		@ frame_needed = 1, uses_anonymous_args = 0
 779 0664 80B5     		push	{r7, lr}
 780              	.LCFI14:
 781              		.cfi_def_cfa_offset 8
 782              		.cfi_offset 14, -4
 783              		.cfi_offset 7, -8
 784 0666 84B0     		sub	sp, sp, #16
 785              	.LCFI15:
 786              		.cfi_def_cfa_offset 24
 787 0668 00AF     		add	r7, sp, #0
 788              	.LCFI16:
 789              		.cfi_def_cfa_register 7
 790 066a 0346     		mov	r3, r0
 791 066c FB71     		strb	r3, [r7, #7]
 188:../src/sensors.c **** 	ErrorStatus error = ERROR;
 792              		.loc 1 188 0
 793 066e 4FF00003 		mov	r3, #0
 794 0672 FB73     		strb	r3, [r7, #15]
 189:../src/sensors.c **** 	uint8_t ui8RegState = 0;
 795              		.loc 1 189 0
 796 0674 4FF00003 		mov	r3, #0
 797 0678 BB73     		strb	r3, [r7, #14]
 190:../src/sensors.c **** 	masterReceive(MPU6000_ADDRESS, 106, I2C2_DMABufRX, 5);
 798              		.loc 1 190 0
 799 067a 4FF0D000 		mov	r0, #208
 800 067e 4FF06A01 		mov	r1, #106
 801 0682 40F20002 		movw	r2, #:lower16:I2C2_DMABufRX
 802 0686 C0F20002 		movt	r2, #:upper16:I2C2_DMABufRX
 803 068a 4FF00503 		mov	r3, #5
 804 068e FFF7FEFF 		bl	masterReceive
 191:../src/sensors.c **** 	ui8RegState = I2C2_DMABufRX[0];
 805              		.loc 1 191 0
 806 0692 40F20003 		movw	r3, #:lower16:I2C2_DMABufRX
 807 0696 C0F20003 		movt	r3, #:upper16:I2C2_DMABufRX
 808 069a 1B78     		ldrb	r3, [r3, #0]
 809 069c BB73     		strb	r3, [r7, #14]
 192:../src/sensors.c **** 
 193:../src/sensors.c **** 	I2C2_DMABufTX[0] = 106;
 810              		.loc 1 193 0
 811 069e 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 812 06a2 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 813 06a6 4FF06A02 		mov	r2, #106
 814 06aa 1A70     		strb	r2, [r3, #0]
 194:../src/sensors.c **** 	if(newState == ENABLE)
 815              		.loc 1 194 0
 816 06ac FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 817 06ae 012B     		cmp	r3, #1
 818 06b0 09D1     		bne	.L13
 195:../src/sensors.c **** 	{
 196:../src/sensors.c ****     	I2C2_DMABufTX[1] = ui8RegState | 0x20;
 819              		.loc 1 196 0
 820 06b2 BB7B     		ldrb	r3, [r7, #14]
 821 06b4 43F02003 		orr	r3, r3, #32
 822 06b8 DAB2     		uxtb	r2, r3
 823 06ba 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 824 06be C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 825 06c2 5A70     		strb	r2, [r3, #1]
 826 06c4 08E0     		b	.L14
 827              	.L13:
 197:../src/sensors.c **** 	}
 198:../src/sensors.c **** 	else
 199:../src/sensors.c **** 	{
 200:../src/sensors.c **** 		I2C2_DMABufTX[1] = ui8RegState & ~0x20;
 828              		.loc 1 200 0
 829 06c6 BB7B     		ldrb	r3, [r7, #14]
 830 06c8 23F02003 		bic	r3, r3, #32
 831 06cc DAB2     		uxtb	r2, r3
 832 06ce 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 833 06d2 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 834 06d6 5A70     		strb	r2, [r3, #1]
 835              	.L14:
 201:../src/sensors.c **** 	}
 202:../src/sensors.c **** 	masterSend(MPU6000_ADDRESS, I2C2_DMABufTX, 2);
 836              		.loc 1 202 0
 837 06d8 4FF0D000 		mov	r0, #208
 838 06dc 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 839 06e0 C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 840 06e4 4FF00202 		mov	r2, #2
 841 06e8 FFF7FEFF 		bl	masterSend
 203:../src/sensors.c **** 	Delaynus(20000);
 842              		.loc 1 203 0
 843 06ec 44F62060 		movw	r0, #20000
 844 06f0 FFF7FEFF 		bl	Delaynus
 204:../src/sensors.c **** 	return  error;
 845              		.loc 1 204 0
 846 06f4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 205:../src/sensors.c **** }
 847              		.loc 1 205 0
 848 06f6 1846     		mov	r0, r3
 849 06f8 07F11007 		add	r7, r7, #16
 850 06fc BD46     		mov	sp, r7
 851 06fe 80BD     		pop	{r7, pc}
 852              		.cfi_endproc
 853              	.LFE115:
 855              		.align	2
 856              		.global	HMC5883_Enable
 857              		.thumb
 858              		.thumb_func
 860              	HMC5883_Enable:
 861              	.LFB116:
 206:../src/sensors.c **** 
 207:../src/sensors.c **** ErrorStatus HMC5883_Enable(FunctionalState newState)
 208:../src/sensors.c **** {
 862              		.loc 1 208 0
 863              		.cfi_startproc
 864              		@ args = 0, pretend = 0, frame = 16
 865              		@ frame_needed = 1, uses_anonymous_args = 0
 866 0700 80B5     		push	{r7, lr}
 867              	.LCFI17:
 868              		.cfi_def_cfa_offset 8
 869              		.cfi_offset 14, -4
 870              		.cfi_offset 7, -8
 871 0702 84B0     		sub	sp, sp, #16
 872              	.LCFI18:
 873              		.cfi_def_cfa_offset 24
 874 0704 00AF     		add	r7, sp, #0
 875              	.LCFI19:
 876              		.cfi_def_cfa_register 7
 877 0706 0346     		mov	r3, r0
 878 0708 FB71     		strb	r3, [r7, #7]
 209:../src/sensors.c **** 	ErrorStatus error = ERROR;
 879              		.loc 1 209 0
 880 070a 4FF00003 		mov	r3, #0
 881 070e FB73     		strb	r3, [r7, #15]
 210:../src/sensors.c **** 	// Start at reg 0
 211:../src/sensors.c **** 	I2C2_DMABufTX[0] = 0;
 882              		.loc 1 211 0
 883 0710 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 884 0714 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 885 0718 4FF00002 		mov	r2, #0
 886 071c 1A70     		strb	r2, [r3, #0]
 212:../src/sensors.c **** 	// CRA = 8 samples, 75 Hz, normal
 213:../src/sensors.c **** 	I2C2_DMABufTX[1] = 0x78;
 887              		.loc 1 213 0
 888 071e 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 889 0722 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 890 0726 4FF07802 		mov	r2, #120
 891 072a 5A70     		strb	r2, [r3, #1]
 214:../src/sensors.c **** 	// CRB = +- 1,3 Gauss
 215:../src/sensors.c **** 	I2C2_DMABufTX[2] = 0x20;
 892              		.loc 1 215 0
 893 072c 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 894 0730 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 895 0734 4FF02002 		mov	r2, #32
 896 0738 9A70     		strb	r2, [r3, #2]
 216:../src/sensors.c **** 	if(newState == ENABLE)
 897              		.loc 1 216 0
 898 073a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 899 073c 012B     		cmp	r3, #1
 900 073e 07D1     		bne	.L16
 217:../src/sensors.c **** 	{
 218:../src/sensors.c **** 		// Mode = continuous
 219:../src/sensors.c **** 		I2C2_DMABufTX[3] = 0x00;
 901              		.loc 1 219 0
 902 0740 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 903 0744 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 904 0748 4FF00002 		mov	r2, #0
 905 074c DA70     		strb	r2, [r3, #3]
 906 074e 06E0     		b	.L17
 907              	.L16:
 220:../src/sensors.c **** 	}
 221:../src/sensors.c **** 	else
 222:../src/sensors.c **** 	{
 223:../src/sensors.c **** 		// Mode = idle
 224:../src/sensors.c **** 		I2C2_DMABufTX[3] = 0x02;
 908              		.loc 1 224 0
 909 0750 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 910 0754 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 911 0758 4FF00202 		mov	r2, #2
 912 075c DA70     		strb	r2, [r3, #3]
 913              	.L17:
 225:../src/sensors.c **** 	}
 226:../src/sensors.c **** 	masterSend(HMC5883_ADDRESS, I2C2_DMABufTX, 4);
 914              		.loc 1 226 0
 915 075e 4FF03C00 		mov	r0, #60
 916 0762 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 917 0766 C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 918 076a 4FF00402 		mov	r2, #4
 919 076e FFF7FEFF 		bl	masterSend
 227:../src/sensors.c **** 	Delaynus(20000);
 920              		.loc 1 227 0
 921 0772 44F62060 		movw	r0, #20000
 922 0776 FFF7FEFF 		bl	Delaynus
 228:../src/sensors.c **** 	return error;
 923              		.loc 1 228 0
 924 077a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 229:../src/sensors.c **** }
 925              		.loc 1 229 0
 926 077c 1846     		mov	r0, r3
 927 077e 07F11007 		add	r7, r7, #16
 928 0782 BD46     		mov	sp, r7
 929 0784 80BD     		pop	{r7, pc}
 930              		.cfi_endproc
 931              	.LFE116:
 933 0786 00BF     		.align	2
 934              		.global	MPL3115A2_Enable
 935              		.thumb
 936              		.thumb_func
 938              	MPL3115A2_Enable:
 939              	.LFB117:
 230:../src/sensors.c **** 
 231:../src/sensors.c **** ErrorStatus MPL3115A2_Enable(FunctionalState newState)
 232:../src/sensors.c **** {
 940              		.loc 1 232 0
 941              		.cfi_startproc
 942              		@ args = 0, pretend = 0, frame = 16
 943              		@ frame_needed = 1, uses_anonymous_args = 0
 944 0788 80B5     		push	{r7, lr}
 945              	.LCFI20:
 946              		.cfi_def_cfa_offset 8
 947              		.cfi_offset 14, -4
 948              		.cfi_offset 7, -8
 949 078a 84B0     		sub	sp, sp, #16
 950              	.LCFI21:
 951              		.cfi_def_cfa_offset 24
 952 078c 00AF     		add	r7, sp, #0
 953              	.LCFI22:
 954              		.cfi_def_cfa_register 7
 955 078e 0346     		mov	r3, r0
 956 0790 FB71     		strb	r3, [r7, #7]
 233:../src/sensors.c **** 	ErrorStatus error = ERROR;
 957              		.loc 1 233 0
 958 0792 4FF00003 		mov	r3, #0
 959 0796 FB73     		strb	r3, [r7, #15]
 234:../src/sensors.c **** 	// Start at reg 38
 235:../src/sensors.c **** 	I2C2_DMABufTX[0] = 38;
 960              		.loc 1 235 0
 961 0798 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 962 079c C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 963 07a0 4FF02602 		mov	r2, #38
 964 07a4 1A70     		strb	r2, [r3, #0]
 236:../src/sensors.c **** 	if(newState == ENABLE)
 965              		.loc 1 236 0
 966 07a6 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 967 07a8 012B     		cmp	r3, #1
 968 07aa 07D1     		bne	.L19
 237:../src/sensors.c **** 	{
 238:../src/sensors.c **** 		// Mode = enable, altimeter mode
 239:../src/sensors.c **** 		I2C2_DMABufTX[1] = 0x81;
 969              		.loc 1 239 0
 970 07ac 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 971 07b0 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 972 07b4 4FF08102 		mov	r2, #129
 973 07b8 5A70     		strb	r2, [r3, #1]
 974 07ba 06E0     		b	.L20
 975              	.L19:
 240:../src/sensors.c **** 	}
 241:../src/sensors.c **** 	else
 242:../src/sensors.c **** 	{
 243:../src/sensors.c **** 		// Mode = disable
 244:../src/sensors.c **** 		I2C2_DMABufTX[1] = 0x80;
 976              		.loc 1 244 0
 977 07bc 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 978 07c0 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 979 07c4 4FF08002 		mov	r2, #128
 980 07c8 5A70     		strb	r2, [r3, #1]
 981              	.L20:
 245:../src/sensors.c **** 	}
 246:../src/sensors.c **** 	//
 247:../src/sensors.c **** 	I2C2_DMABufTX[2] = 0x00;
 982              		.loc 1 247 0
 983 07ca 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 984 07ce C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 985 07d2 4FF00002 		mov	r2, #0
 986 07d6 9A70     		strb	r2, [r3, #2]
 248:../src/sensors.c **** 	// Interrupt active high, open drain
 249:../src/sensors.c **** 	I2C2_DMABufTX[3] = 0x33;
 987              		.loc 1 249 0
 988 07d8 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 989 07dc C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 990 07e0 4FF03302 		mov	r2, #51
 991 07e4 DA70     		strb	r2, [r3, #3]
 250:../src/sensors.c **** 	// Data ready interrupt enabled
 251:../src/sensors.c **** 	I2C2_DMABufTX[4] = 0x80;
 992              		.loc 1 251 0
 993 07e6 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 994 07ea C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 995 07ee 4FF08002 		mov	r2, #128
 996 07f2 1A71     		strb	r2, [r3, #4]
 252:../src/sensors.c **** 	// Interrupt routed to pin 2
 253:../src/sensors.c **** 	I2C2_DMABufTX[5] = 0x00;
 997              		.loc 1 253 0
 998 07f4 40F20003 		movw	r3, #:lower16:I2C2_DMABufTX
 999 07f8 C0F20003 		movt	r3, #:upper16:I2C2_DMABufTX
 1000 07fc 4FF00002 		mov	r2, #0
 1001 0800 5A71     		strb	r2, [r3, #5]
 254:../src/sensors.c **** 
 255:../src/sensors.c **** 	masterSend(MPL3115A2_ADDRESS, I2C2_DMABufTX, 6);
 1002              		.loc 1 255 0
 1003 0802 4FF0C000 		mov	r0, #192
 1004 0806 40F20001 		movw	r1, #:lower16:I2C2_DMABufTX
 1005 080a C0F20001 		movt	r1, #:upper16:I2C2_DMABufTX
 1006 080e 4FF00602 		mov	r2, #6
 1007 0812 FFF7FEFF 		bl	masterSend
 256:../src/sensors.c **** 	Delaynus(20000);
 1008              		.loc 1 256 0
 1009 0816 44F62060 		movw	r0, #20000
 1010 081a FFF7FEFF 		bl	Delaynus
 257:../src/sensors.c **** 	return error;
 1011              		.loc 1 257 0
 1012 081e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 258:../src/sensors.c **** }
 1013              		.loc 1 258 0
 1014 0820 1846     		mov	r0, r3
 1015 0822 07F11007 		add	r7, r7, #16
 1016 0826 BD46     		mov	sp, r7
 1017 0828 80BD     		pop	{r7, pc}
 1018              		.cfi_endproc
 1019              	.LFE117:
 1021 082a 00BF     		.align	2
 1022              		.global	masterSend
 1023              		.thumb
 1024              		.thumb_func
 1026              	masterSend:
 1027              	.LFB118:
 259:../src/sensors.c **** 
 260:../src/sensors.c **** ErrorStatus masterSend(uint8_t device, uint8_t *dataBuffer, uint8_t byteCount)
 261:../src/sensors.c **** {
 1028              		.loc 1 261 0
 1029              		.cfi_startproc
 1030              		@ args = 0, pretend = 0, frame = 72
 1031              		@ frame_needed = 1, uses_anonymous_args = 0
 1032 082c 80B5     		push	{r7, lr}
 1033              	.LCFI23:
 1034              		.cfi_def_cfa_offset 8
 1035              		.cfi_offset 14, -4
 1036              		.cfi_offset 7, -8
 1037 082e 92B0     		sub	sp, sp, #72
 1038              	.LCFI24:
 1039              		.cfi_def_cfa_offset 80
 1040 0830 00AF     		add	r7, sp, #0
 1041              	.LCFI25:
 1042              		.cfi_def_cfa_register 7
 1043 0832 3960     		str	r1, [r7, #0]
 1044 0834 1346     		mov	r3, r2
 1045 0836 0246     		mov	r2, r0
 1046 0838 FA71     		strb	r2, [r7, #7]
 1047 083a BB71     		strb	r3, [r7, #6]
 262:../src/sensors.c **** 	DMA_InitTypeDef DMAInitStructure;
 263:../src/sensors.c **** 	// Disable I2C2 interrupts
 264:../src/sensors.c **** 	I2C_ITConfig(I2C2, I2C_IT_BUF | I2C_IT_EVT | I2C_IT_ERR, DISABLE);
 1048              		.loc 1 264 0
 1049 083c 4FF4B040 		mov	r0, #22528
 1050 0840 C4F20000 		movt	r0, 16384
 1051 0844 4FF4E061 		mov	r1, #1792
 1052 0848 4FF00002 		mov	r2, #0
 1053 084c FFF7FEFF 		bl	I2C_ITConfig
 265:../src/sensors.c **** 	// Disable DMA TX Channel
 266:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_TX, DISABLE);
 1054              		.loc 1 266 0
 1055 0850 46F2B800 		movw	r0, #24760
 1056 0854 C4F20200 		movt	r0, 16386
 1057 0858 4FF00001 		mov	r1, #0
 1058 085c FFF7FEFF 		bl	DMA_Cmd
 267:../src/sensors.c **** 	// Wait until stream is disabled
 268:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_TX) != DISABLE)
 1059              		.loc 1 268 0
 1060 0860 00BF     		nop
 1061              	.L22:
 1062              		.loc 1 268 0 is_stmt 0 discriminator 1
 1063 0862 46F2B800 		movw	r0, #24760
 1064 0866 C4F20200 		movt	r0, 16386
 1065 086a FFF7FEFF 		bl	DMA_GetCmdStatus
 1066 086e 0346     		mov	r3, r0
 1067 0870 002B     		cmp	r3, #0
 1068 0872 F6D1     		bne	.L22
 269:../src/sensors.c **** 	{
 270:../src/sensors.c **** 	}
 271:../src/sensors.c **** 	// Deinit DMA
 272:../src/sensors.c **** 	DMA_DeInit(DMA_I2C2_TX);
 1069              		.loc 1 272 0 is_stmt 1
 1070 0874 46F2B800 		movw	r0, #24760
 1071 0878 C4F20200 		movt	r0, 16386
 1072 087c FFF7FEFF 		bl	DMA_DeInit
 273:../src/sensors.c **** 	// Configure I2C2 DMA
 274:../src/sensors.c **** 	//set init structure
 275:../src/sensors.c **** 	//channel to use
 276:../src/sensors.c **** 	DMAInitStructure.DMA_Channel = DMA_Channel_7;
 1073              		.loc 1 276 0
 1074 0880 4FF06063 		mov	r3, #234881024
 1075 0884 FB60     		str	r3, [r7, #12]
 277:../src/sensors.c **** 	//peripheral data address
 278:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBaseAddr = (uint32_t)&I2C2->DR;//    I2C2_DR_ADDRESS;
 1076              		.loc 1 278 0
 1077 0886 45F61003 		movw	r3, #22544
 1078 088a C4F20003 		movt	r3, 16384
 1079 088e 3B61     		str	r3, [r7, #16]
 279:../src/sensors.c **** 	// DMA buffer address
 280:../src/sensors.c **** 	DMAInitStructure.DMA_Memory0BaseAddr = (uint32_t)dataBuffer;
 1080              		.loc 1 280 0
 1081 0890 3B68     		ldr	r3, [r7, #0]
 1082 0892 7B61     		str	r3, [r7, #20]
 281:../src/sensors.c **** 	DMAInitStructure.DMA_DIR = DMA_DIR_MemoryToPeripheral;
 1083              		.loc 1 281 0
 1084 0894 4FF04003 		mov	r3, #64
 1085 0898 BB61     		str	r3, [r7, #24]
 282:../src/sensors.c **** 	DMAInitStructure.DMA_BufferSize = byteCount;
 1086              		.loc 1 282 0
 1087 089a BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1088 089c FB61     		str	r3, [r7, #28]
 283:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
 1089              		.loc 1 283 0
 1090 089e 4FF00003 		mov	r3, #0
 1091 08a2 3B62     		str	r3, [r7, #32]
 284:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable;
 1092              		.loc 1 284 0
 1093 08a4 4FF48063 		mov	r3, #1024
 1094 08a8 7B62     		str	r3, [r7, #36]
 285:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
 1095              		.loc 1 285 0
 1096 08aa 4FF00003 		mov	r3, #0
 1097 08ae BB62     		str	r3, [r7, #40]
 286:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
 1098              		.loc 1 286 0
 1099 08b0 4FF00003 		mov	r3, #0
 1100 08b4 FB62     		str	r3, [r7, #44]
 287:../src/sensors.c **** 	DMAInitStructure.DMA_Mode = DMA_Mode_Normal;
 1101              		.loc 1 287 0
 1102 08b6 4FF00003 		mov	r3, #0
 1103 08ba 3B63     		str	r3, [r7, #48]
 288:../src/sensors.c **** 	DMAInitStructure.DMA_Priority = DMA_Priority_VeryHigh;
 1104              		.loc 1 288 0
 1105 08bc 4FF44033 		mov	r3, #196608
 1106 08c0 7B63     		str	r3, [r7, #52]
 289:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOMode = DMA_FIFOMode_Enable;
 1107              		.loc 1 289 0
 1108 08c2 4FF00403 		mov	r3, #4
 1109 08c6 BB63     		str	r3, [r7, #56]
 290:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOThreshold = DMA_FIFOThreshold_Full;
 1110              		.loc 1 290 0
 1111 08c8 4FF00303 		mov	r3, #3
 1112 08cc FB63     		str	r3, [r7, #60]
 291:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryBurst = DMA_MemoryBurst_Single;
 1113              		.loc 1 291 0
 1114 08ce 4FF00003 		mov	r3, #0
 1115 08d2 3B64     		str	r3, [r7, #64]
 292:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBurst = DMA_PeripheralBurst_Single;
 1116              		.loc 1 292 0
 1117 08d4 4FF00003 		mov	r3, #0
 1118 08d8 7B64     		str	r3, [r7, #68]
 293:../src/sensors.c **** 	// Configure peripheral
 294:../src/sensors.c **** 	DMA_Init(DMA_I2C2_TX, &DMAInitStructure);
 1119              		.loc 1 294 0
 1120 08da 46F2B800 		movw	r0, #24760
 1121 08de C4F20200 		movt	r0, 16386
 1122 08e2 07F10C03 		add	r3, r7, #12
 1123 08e6 1946     		mov	r1, r3
 1124 08e8 FFF7FEFF 		bl	DMA_Init
 295:../src/sensors.c **** 
 296:../src/sensors.c **** 	// Clear DMA flags
 297:../src/sensors.c **** 	DMA_ClearFlag(DMA_I2C2_TX, DMA_FLAG_TCIF7 | DMA_FLAG_FEIF7 | DMA_FLAG_DMEIF7 |  DMA_FLAG_TEIF7 | D
 1125              		.loc 1 297 0
 1126 08ec 46F2B800 		movw	r0, #24760
 1127 08f0 C4F20200 		movt	r0, 16386
 1128 08f4 4FF03D51 		mov	r1, #792723456
 1129 08f8 FFF7FEFF 		bl	DMA_ClearFlag
 298:../src/sensors.c **** 
 299:../src/sensors.c **** 	// Check BUSY flag
 300:../src/sensors.c **** 	if(I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1130              		.loc 1 300 0
 1131 08fc 4FF4B040 		mov	r0, #22528
 1132 0900 C4F20000 		movt	r0, 16384
 1133 0904 4FF40031 		mov	r1, #131072
 1134 0908 FFF7FEFF 		bl	I2C_GetFlagStatus
 1135 090c 0346     		mov	r3, r0
 1136 090e 002B     		cmp	r3, #0
 1137 0910 0BD0     		beq	.L23
 301:../src/sensors.c **** 	{
 302:../src/sensors.c **** 		while(!I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1138              		.loc 1 302 0
 1139 0912 00BF     		nop
 1140              	.L24:
 1141              		.loc 1 302 0 is_stmt 0 discriminator 1
 1142 0914 4FF4B040 		mov	r0, #22528
 1143 0918 C4F20000 		movt	r0, 16384
 1144 091c 4FF40031 		mov	r1, #131072
 1145 0920 FFF7FEFF 		bl	I2C_GetFlagStatus
 1146 0924 0346     		mov	r3, r0
 1147 0926 002B     		cmp	r3, #0
 1148 0928 F4D0     		beq	.L24
 1149              	.L23:
 303:../src/sensors.c **** 		{}
 304:../src/sensors.c **** 	}
 305:../src/sensors.c **** 	// Send I2C1 START condition
 306:../src/sensors.c **** 	I2C_GenerateSTART(I2C2, ENABLE);
 1150              		.loc 1 306 0 is_stmt 1
 1151 092a 4FF4B040 		mov	r0, #22528
 1152 092e C4F20000 		movt	r0, 16384
 1153 0932 4FF00101 		mov	r1, #1
 1154 0936 FFF7FEFF 		bl	I2C_GenerateSTART
 307:../src/sensors.c **** 
 308:../src/sensors.c **** 	// wait for I2C1 EV5 --> Slave has acknowledged start condition
 309:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_MODE_SELECT));
 1155              		.loc 1 309 0
 1156 093a 00BF     		nop
 1157              	.L25:
 1158              		.loc 1 309 0 is_stmt 0 discriminator 1
 1159 093c 4FF4B040 		mov	r0, #22528
 1160 0940 C4F20000 		movt	r0, 16384
 1161 0944 4FF00101 		mov	r1, #1
 1162 0948 C0F20301 		movt	r1, 3
 1163 094c FFF7FEFF 		bl	I2C_CheckEvent
 1164 0950 0346     		mov	r3, r0
 1165 0952 002B     		cmp	r3, #0
 1166 0954 F2D0     		beq	.L25
 310:../src/sensors.c **** 
 311:../src/sensors.c **** 	// Send slave Address for write
 312:../src/sensors.c **** 	I2C_Send7bitAddress(I2C2, device, I2C_Direction_Transmitter);
 1167              		.loc 1 312 0 is_stmt 1
 1168 0956 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1169 0958 4FF4B040 		mov	r0, #22528
 1170 095c C4F20000 		movt	r0, 16384
 1171 0960 1946     		mov	r1, r3
 1172 0962 4FF00002 		mov	r2, #0
 1173 0966 FFF7FEFF 		bl	I2C_Send7bitAddress
 313:../src/sensors.c **** 
 314:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED));
 1174              		.loc 1 314 0
 1175 096a 00BF     		nop
 1176              	.L26:
 1177              		.loc 1 314 0 is_stmt 0 discriminator 1
 1178 096c 4FF4B040 		mov	r0, #22528
 1179 0970 C4F20000 		movt	r0, 16384
 1180 0974 4FF08201 		mov	r1, #130
 1181 0978 C0F20701 		movt	r1, 7
 1182 097c FFF7FEFF 		bl	I2C_CheckEvent
 1183 0980 0346     		mov	r3, r0
 1184 0982 002B     		cmp	r3, #0
 1185 0984 F2D0     		beq	.L26
 315:../src/sensors.c **** 
 316:../src/sensors.c **** 	// Transfer DMA data
 317:../src/sensors.c **** 
 318:../src/sensors.c **** 	DMA_ClearFlag(DMA_I2C2_TX, DMA_FLAG_TCIF7);
 1186              		.loc 1 318 0 is_stmt 1
 1187 0986 46F2B800 		movw	r0, #24760
 1188 098a C4F20200 		movt	r0, 16386
 1189 098e 4FF02051 		mov	r1, #671088640
 1190 0992 FFF7FEFF 		bl	DMA_ClearFlag
 319:../src/sensors.c **** 
 320:../src/sensors.c **** 	/* I2Cx DMA Enable */
 321:../src/sensors.c **** 	I2C_DMACmd(I2C2, ENABLE);
 1191              		.loc 1 321 0
 1192 0996 4FF4B040 		mov	r0, #22528
 1193 099a C4F20000 		movt	r0, 16384
 1194 099e 4FF00101 		mov	r1, #1
 1195 09a2 FFF7FEFF 		bl	I2C_DMACmd
 322:../src/sensors.c **** 
 323:../src/sensors.c **** 	/* Enable DMA TX Channel */
 324:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_TX, ENABLE);
 1196              		.loc 1 324 0
 1197 09a6 46F2B800 		movw	r0, #24760
 1198 09aa C4F20200 		movt	r0, 16386
 1199 09ae 4FF00101 		mov	r1, #1
 1200 09b2 FFF7FEFF 		bl	DMA_Cmd
 325:../src/sensors.c **** 
 326:../src/sensors.c **** 	/* Wait until I2Cx_DMA_STREAM_RX enabled or time out */
 327:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_TX)!= ENABLE)
 1201              		.loc 1 327 0
 1202 09b6 0AE0     		b	.L27
 1203              	.L29:
 328:../src/sensors.c **** 	{
 329:../src/sensors.c **** 		// Check if we have complete interrupt
 330:../src/sensors.c **** 		if(DMA_GetFlagStatus(DMA_I2C2_TX,DMA_FLAG_TCIF7)!=RESET)
 1204              		.loc 1 330 0
 1205 09b8 46F2B800 		movw	r0, #24760
 1206 09bc C4F20200 		movt	r0, 16386
 1207 09c0 4FF02051 		mov	r1, #671088640
 1208 09c4 FFF7FEFF 		bl	DMA_GetFlagStatus
 1209 09c8 0346     		mov	r3, r0
 1210 09ca 002B     		cmp	r3, #0
 1211 09cc 09D1     		bne	.L34
 1212              	.L27:
 327:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_TX)!= ENABLE)
 1213              		.loc 1 327 0 discriminator 1
 1214 09ce 46F2B800 		movw	r0, #24760
 1215 09d2 C4F20200 		movt	r0, 16386
 1216 09d6 FFF7FEFF 		bl	DMA_GetCmdStatus
 1217 09da 0346     		mov	r3, r0
 1218 09dc 012B     		cmp	r3, #1
 1219 09de EBD1     		bne	.L29
 331:../src/sensors.c **** 		{
 332:../src/sensors.c **** 			// If yes, break
 333:../src/sensors.c **** 			//Delaynus(2000);
 334:../src/sensors.c **** 			break;
 335:../src/sensors.c **** 		}
 336:../src/sensors.c **** 	}
 337:../src/sensors.c **** 
 338:../src/sensors.c **** 	/* Transfer complete or time out */
 339:../src/sensors.c **** 	while (DMA_GetFlagStatus(DMA_I2C2_TX,DMA_FLAG_TCIF7)==RESET)
 1220              		.loc 1 339 0
 1221 09e0 00E0     		b	.L35
 1222              	.L34:
 334:../src/sensors.c **** 			break;
 1223              		.loc 1 334 0
 1224 09e2 00BF     		nop
 1225              	.L33:
 1226              	.L35:
 1227              		.loc 1 339 0
 1228 09e4 00BF     		nop
 1229              	.L30:
 1230              		.loc 1 339 0 is_stmt 0 discriminator 1
 1231 09e6 46F2B800 		movw	r0, #24760
 1232 09ea C4F20200 		movt	r0, 16386
 1233 09ee 4FF02051 		mov	r1, #671088640
 1234 09f2 FFF7FEFF 		bl	DMA_GetFlagStatus
 1235 09f6 0346     		mov	r3, r0
 1236 09f8 002B     		cmp	r3, #0
 1237 09fa F4D0     		beq	.L30
 340:../src/sensors.c **** 	{
 341:../src/sensors.c **** 	}
 342:../src/sensors.c **** 
 343:../src/sensors.c **** 	// Check TxE bit
 344:../src/sensors.c **** 	while(I2C_GetFlagStatus(I2C2, I2C_FLAG_TXE) == RESET)
 1238              		.loc 1 344 0 is_stmt 1
 1239 09fc 00BF     		nop
 1240              	.L31:
 1241              		.loc 1 344 0 is_stmt 0 discriminator 1
 1242 09fe 4FF4B040 		mov	r0, #22528
 1243 0a02 C4F20000 		movt	r0, 16384
 1244 0a06 4FF08001 		mov	r1, #128
 1245 0a0a C1F20001 		movt	r1, 4096
 1246 0a0e FFF7FEFF 		bl	I2C_GetFlagStatus
 1247 0a12 0346     		mov	r3, r0
 1248 0a14 002B     		cmp	r3, #0
 1249 0a16 F2D0     		beq	.L31
 345:../src/sensors.c **** 	{
 346:../src/sensors.c **** 	}
 347:../src/sensors.c **** 
 348:../src/sensors.c **** 	/* Send I2Cx STOP Condition */
 349:../src/sensors.c **** 	I2C_GenerateSTOP(I2C2, ENABLE);
 1250              		.loc 1 349 0 is_stmt 1
 1251 0a18 4FF4B040 		mov	r0, #22528
 1252 0a1c C4F20000 		movt	r0, 16384
 1253 0a20 4FF00101 		mov	r1, #1
 1254 0a24 FFF7FEFF 		bl	I2C_GenerateSTOP
 350:../src/sensors.c **** 
 351:../src/sensors.c **** 	/* Disable DMA RX Channel */
 352:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_TX, DISABLE);
 1255              		.loc 1 352 0
 1256 0a28 46F2B800 		movw	r0, #24760
 1257 0a2c C4F20200 		movt	r0, 16386
 1258 0a30 4FF00001 		mov	r1, #0
 1259 0a34 FFF7FEFF 		bl	DMA_Cmd
 353:../src/sensors.c **** 
 354:../src/sensors.c **** 	/* Wait until I2Cx_DMA_STREAM_RX disabled or time out */
 355:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_TX)!= DISABLE)
 1260              		.loc 1 355 0
 1261 0a38 00BF     		nop
 1262              	.L32:
 1263              		.loc 1 355 0 is_stmt 0 discriminator 1
 1264 0a3a 46F2B800 		movw	r0, #24760
 1265 0a3e C4F20200 		movt	r0, 16386
 1266 0a42 FFF7FEFF 		bl	DMA_GetCmdStatus
 1267 0a46 0346     		mov	r3, r0
 1268 0a48 002B     		cmp	r3, #0
 1269 0a4a F6D1     		bne	.L32
 356:../src/sensors.c **** 	{}
 357:../src/sensors.c **** 	/* Disable I2C DMA request */
 358:../src/sensors.c **** 	I2C_DMACmd(I2C2,DISABLE);
 1270              		.loc 1 358 0 is_stmt 1
 1271 0a4c 4FF4B040 		mov	r0, #22528
 1272 0a50 C4F20000 		movt	r0, 16384
 1273 0a54 4FF00001 		mov	r1, #0
 1274 0a58 FFF7FEFF 		bl	I2C_DMACmd
 359:../src/sensors.c **** 	return SUCCESS;
 1275              		.loc 1 359 0
 1276 0a5c 4FF00103 		mov	r3, #1
 360:../src/sensors.c **** }
 1277              		.loc 1 360 0
 1278 0a60 1846     		mov	r0, r3
 1279 0a62 07F14807 		add	r7, r7, #72
 1280 0a66 BD46     		mov	sp, r7
 1281 0a68 80BD     		pop	{r7, pc}
 1282              		.cfi_endproc
 1283              	.LFE118:
 1285 0a6a 00BF     		.align	2
 1286              		.global	masterReceive_beginDMA
 1287              		.thumb
 1288              		.thumb_func
 1290              	masterReceive_beginDMA:
 1291              	.LFB119:
 361:../src/sensors.c **** 
 362:../src/sensors.c **** // Function starts DMA receive process
 363:../src/sensors.c **** ErrorStatus masterReceive_beginDMA(uint8_t device, uint8_t startReg, uint8_t *dataBuffer, uint8_t b
 364:../src/sensors.c **** {
 1292              		.loc 1 364 0
 1293              		.cfi_startproc
 1294              		@ args = 0, pretend = 0, frame = 72
 1295              		@ frame_needed = 1, uses_anonymous_args = 0
 1296 0a6c 80B5     		push	{r7, lr}
 1297              	.LCFI26:
 1298              		.cfi_def_cfa_offset 8
 1299              		.cfi_offset 14, -4
 1300              		.cfi_offset 7, -8
 1301 0a6e 92B0     		sub	sp, sp, #72
 1302              	.LCFI27:
 1303              		.cfi_def_cfa_offset 80
 1304 0a70 00AF     		add	r7, sp, #0
 1305              	.LCFI28:
 1306              		.cfi_def_cfa_register 7
 1307 0a72 3A60     		str	r2, [r7, #0]
 1308 0a74 0246     		mov	r2, r0
 1309 0a76 FA71     		strb	r2, [r7, #7]
 1310 0a78 0A46     		mov	r2, r1
 1311 0a7a BA71     		strb	r2, [r7, #6]
 1312 0a7c 7B71     		strb	r3, [r7, #5]
 365:../src/sensors.c **** 	DMA_InitTypeDef DMAInitStructure;
 366:../src/sensors.c **** 
 367:../src/sensors.c **** 	// Mark receive in progress
 368:../src/sensors.c **** 	I2C2_WAITINGDATA = 1;
 1313              		.loc 1 368 0
 1314 0a7e 40F20003 		movw	r3, #:lower16:flag0
 1315 0a82 C0F20003 		movt	r3, #:upper16:flag0
 1316 0a86 1A78     		ldrb	r2, [r3, #0]
 1317 0a88 42F00802 		orr	r2, r2, #8
 1318 0a8c 1A70     		strb	r2, [r3, #0]
 369:../src/sensors.c **** 	// Disable I2C2 interrupts
 370:../src/sensors.c **** 	I2C_ITConfig(I2C2, I2C_IT_BUF | I2C_IT_EVT | I2C_IT_ERR, DISABLE);
 1319              		.loc 1 370 0
 1320 0a8e 4FF4B040 		mov	r0, #22528
 1321 0a92 C4F20000 		movt	r0, 16384
 1322 0a96 4FF4E061 		mov	r1, #1792
 1323 0a9a 4FF00002 		mov	r2, #0
 1324 0a9e FFF7FEFF 		bl	I2C_ITConfig
 371:../src/sensors.c **** 
 372:../src/sensors.c **** 	// Disable DMA RX Channel
 373:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, DISABLE);
 1325              		.loc 1 373 0
 1326 0aa2 46F25800 		movw	r0, #24664
 1327 0aa6 C4F20200 		movt	r0, 16386
 1328 0aaa 4FF00001 		mov	r1, #0
 1329 0aae FFF7FEFF 		bl	DMA_Cmd
 374:../src/sensors.c **** 	// Wait until stream is disabled
 375:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_RX) != DISABLE)
 1330              		.loc 1 375 0
 1331 0ab2 00BF     		nop
 1332              	.L37:
 1333              		.loc 1 375 0 is_stmt 0 discriminator 1
 1334 0ab4 46F25800 		movw	r0, #24664
 1335 0ab8 C4F20200 		movt	r0, 16386
 1336 0abc FFF7FEFF 		bl	DMA_GetCmdStatus
 1337 0ac0 0346     		mov	r3, r0
 1338 0ac2 002B     		cmp	r3, #0
 1339 0ac4 F6D1     		bne	.L37
 376:../src/sensors.c **** 	{
 377:../src/sensors.c **** 	}
 378:../src/sensors.c **** 	// Deinit DMA
 379:../src/sensors.c **** 	DMA_DeInit(DMA_I2C2_RX);
 1340              		.loc 1 379 0 is_stmt 1
 1341 0ac6 46F25800 		movw	r0, #24664
 1342 0aca C4F20200 		movt	r0, 16386
 1343 0ace FFF7FEFF 		bl	DMA_DeInit
 380:../src/sensors.c **** 	// Configure I2C2 DMA
 381:../src/sensors.c **** 	//set init structure
 382:../src/sensors.c **** 	//channel to use
 383:../src/sensors.c **** 	DMAInitStructure.DMA_Channel = DMA_Channel_7;
 1344              		.loc 1 383 0
 1345 0ad2 4FF06063 		mov	r3, #234881024
 1346 0ad6 FB60     		str	r3, [r7, #12]
 384:../src/sensors.c **** 	//peripheral data address
 385:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBaseAddr = (uint32_t)&I2C2->DR;//    I2C2_DR_ADDRESS;
 1347              		.loc 1 385 0
 1348 0ad8 45F61003 		movw	r3, #22544
 1349 0adc C4F20003 		movt	r3, 16384
 1350 0ae0 3B61     		str	r3, [r7, #16]
 386:../src/sensors.c **** 	// DMA buffer address
 387:../src/sensors.c **** 	DMAInitStructure.DMA_Memory0BaseAddr = (uint32_t)dataBuffer;
 1351              		.loc 1 387 0
 1352 0ae2 3B68     		ldr	r3, [r7, #0]
 1353 0ae4 7B61     		str	r3, [r7, #20]
 388:../src/sensors.c **** 	DMAInitStructure.DMA_DIR = DMA_DIR_PeripheralToMemory;
 1354              		.loc 1 388 0
 1355 0ae6 4FF00003 		mov	r3, #0
 1356 0aea BB61     		str	r3, [r7, #24]
 389:../src/sensors.c **** 	DMAInitStructure.DMA_BufferSize = byteCount;
 1357              		.loc 1 389 0
 1358 0aec 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1359 0aee FB61     		str	r3, [r7, #28]
 390:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
 1360              		.loc 1 390 0
 1361 0af0 4FF00003 		mov	r3, #0
 1362 0af4 3B62     		str	r3, [r7, #32]
 391:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable;
 1363              		.loc 1 391 0
 1364 0af6 4FF48063 		mov	r3, #1024
 1365 0afa 7B62     		str	r3, [r7, #36]
 392:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
 1366              		.loc 1 392 0
 1367 0afc 4FF00003 		mov	r3, #0
 1368 0b00 BB62     		str	r3, [r7, #40]
 393:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
 1369              		.loc 1 393 0
 1370 0b02 4FF00003 		mov	r3, #0
 1371 0b06 FB62     		str	r3, [r7, #44]
 394:../src/sensors.c **** 	DMAInitStructure.DMA_Mode = DMA_Mode_Normal;
 1372              		.loc 1 394 0
 1373 0b08 4FF00003 		mov	r3, #0
 1374 0b0c 3B63     		str	r3, [r7, #48]
 395:../src/sensors.c **** 	DMAInitStructure.DMA_Priority = DMA_Priority_VeryHigh;
 1375              		.loc 1 395 0
 1376 0b0e 4FF44033 		mov	r3, #196608
 1377 0b12 7B63     		str	r3, [r7, #52]
 396:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOMode = DMA_FIFOMode_Enable;
 1378              		.loc 1 396 0
 1379 0b14 4FF00403 		mov	r3, #4
 1380 0b18 BB63     		str	r3, [r7, #56]
 397:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOThreshold = DMA_FIFOThreshold_Full;
 1381              		.loc 1 397 0
 1382 0b1a 4FF00303 		mov	r3, #3
 1383 0b1e FB63     		str	r3, [r7, #60]
 398:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryBurst = DMA_MemoryBurst_Single;
 1384              		.loc 1 398 0
 1385 0b20 4FF00003 		mov	r3, #0
 1386 0b24 3B64     		str	r3, [r7, #64]
 399:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBurst = DMA_PeripheralBurst_Single;
 1387              		.loc 1 399 0
 1388 0b26 4FF00003 		mov	r3, #0
 1389 0b2a 7B64     		str	r3, [r7, #68]
 400:../src/sensors.c **** 	// Configure peripheral
 401:../src/sensors.c **** 	DMA_Init(DMA_I2C2_RX, &DMAInitStructure);
 1390              		.loc 1 401 0
 1391 0b2c 46F25800 		movw	r0, #24664
 1392 0b30 C4F20200 		movt	r0, 16386
 1393 0b34 07F10C03 		add	r3, r7, #12
 1394 0b38 1946     		mov	r1, r3
 1395 0b3a FFF7FEFF 		bl	DMA_Init
 402:../src/sensors.c **** 
 403:../src/sensors.c **** 	/* Master Receiver -----------------------------------------------------------*/
 404:../src/sensors.c **** 
 405:../src/sensors.c **** 	// Clear DMA flags
 406:../src/sensors.c **** 	DMA_ClearFlag(DMA_I2C2_RX, DMA_FLAG_TCIF3 | DMA_FLAG_FEIF3 | DMA_FLAG_DMEIF3 |  DMA_FLAG_TEIF3 | D
 1396              		.loc 1 406 0
 1397 0b3e 46F25800 		movw	r0, #24664
 1398 0b42 C4F20200 		movt	r0, 16386
 1399 0b46 4FF0FA51 		mov	r1, #524288000
 1400 0b4a FFF7FEFF 		bl	DMA_ClearFlag
 407:../src/sensors.c **** 
 408:../src/sensors.c **** 	/* Enable DMA NACK automatic generation */
 409:../src/sensors.c **** 	I2C_DMALastTransferCmd(I2C2, ENABLE);
 1401              		.loc 1 409 0
 1402 0b4e 4FF4B040 		mov	r0, #22528
 1403 0b52 C4F20000 		movt	r0, 16384
 1404 0b56 4FF00101 		mov	r1, #1
 1405 0b5a FFF7FEFF 		bl	I2C_DMALastTransferCmd
 410:../src/sensors.c **** 
 411:../src/sensors.c **** 	// Check BUSY flag
 412:../src/sensors.c **** 	if(I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1406              		.loc 1 412 0
 1407 0b5e 4FF4B040 		mov	r0, #22528
 1408 0b62 C4F20000 		movt	r0, 16384
 1409 0b66 4FF40031 		mov	r1, #131072
 1410 0b6a FFF7FEFF 		bl	I2C_GetFlagStatus
 1411 0b6e 0346     		mov	r3, r0
 1412 0b70 002B     		cmp	r3, #0
 1413 0b72 0BD0     		beq	.L38
 413:../src/sensors.c **** 	{
 414:../src/sensors.c **** 		while(!I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1414              		.loc 1 414 0
 1415 0b74 00BF     		nop
 1416              	.L39:
 1417              		.loc 1 414 0 is_stmt 0 discriminator 1
 1418 0b76 4FF4B040 		mov	r0, #22528
 1419 0b7a C4F20000 		movt	r0, 16384
 1420 0b7e 4FF40031 		mov	r1, #131072
 1421 0b82 FFF7FEFF 		bl	I2C_GetFlagStatus
 1422 0b86 0346     		mov	r3, r0
 1423 0b88 002B     		cmp	r3, #0
 1424 0b8a F4D0     		beq	.L39
 1425              	.L38:
 415:../src/sensors.c **** 		{}
 416:../src/sensors.c **** 	}
 417:../src/sensors.c **** 	// Send I2C1 START condition
 418:../src/sensors.c **** 	I2C_GenerateSTART(I2C2, ENABLE);
 1426              		.loc 1 418 0 is_stmt 1
 1427 0b8c 4FF4B040 		mov	r0, #22528
 1428 0b90 C4F20000 		movt	r0, 16384
 1429 0b94 4FF00101 		mov	r1, #1
 1430 0b98 FFF7FEFF 		bl	I2C_GenerateSTART
 419:../src/sensors.c **** 
 420:../src/sensors.c **** 	// wait for I2C1 EV5 --> Slave has acknowledged start condition
 421:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_MODE_SELECT));
 1431              		.loc 1 421 0
 1432 0b9c 00BF     		nop
 1433              	.L40:
 1434              		.loc 1 421 0 is_stmt 0 discriminator 1
 1435 0b9e 4FF4B040 		mov	r0, #22528
 1436 0ba2 C4F20000 		movt	r0, 16384
 1437 0ba6 4FF00101 		mov	r1, #1
 1438 0baa C0F20301 		movt	r1, 3
 1439 0bae FFF7FEFF 		bl	I2C_CheckEvent
 1440 0bb2 0346     		mov	r3, r0
 1441 0bb4 002B     		cmp	r3, #0
 1442 0bb6 F2D0     		beq	.L40
 422:../src/sensors.c **** 
 423:../src/sensors.c **** 	// Send slave Address for write
 424:../src/sensors.c **** 	I2C_Send7bitAddress(I2C2, device, I2C_Direction_Transmitter);
 1443              		.loc 1 424 0 is_stmt 1
 1444 0bb8 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1445 0bba 4FF4B040 		mov	r0, #22528
 1446 0bbe C4F20000 		movt	r0, 16384
 1447 0bc2 1946     		mov	r1, r3
 1448 0bc4 4FF00002 		mov	r2, #0
 1449 0bc8 FFF7FEFF 		bl	I2C_Send7bitAddress
 425:../src/sensors.c **** 
 426:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED));
 1450              		.loc 1 426 0
 1451 0bcc 00BF     		nop
 1452              	.L41:
 1453              		.loc 1 426 0 is_stmt 0 discriminator 1
 1454 0bce 4FF4B040 		mov	r0, #22528
 1455 0bd2 C4F20000 		movt	r0, 16384
 1456 0bd6 4FF08201 		mov	r1, #130
 1457 0bda C0F20701 		movt	r1, 7
 1458 0bde FFF7FEFF 		bl	I2C_CheckEvent
 1459 0be2 0346     		mov	r3, r0
 1460 0be4 002B     		cmp	r3, #0
 1461 0be6 F2D0     		beq	.L41
 427:../src/sensors.c **** 
 428:../src/sensors.c **** 	I2C_SendData(I2C2, startReg);
 1462              		.loc 1 428 0 is_stmt 1
 1463 0be8 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1464 0bea 4FF4B040 		mov	r0, #22528
 1465 0bee C4F20000 		movt	r0, 16384
 1466 0bf2 1946     		mov	r1, r3
 1467 0bf4 FFF7FEFF 		bl	I2C_SendData
 429:../src/sensors.c **** 	// wait for I2C1 EV8_2 --> byte has been transmitted
 430:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_BYTE_TRANSMITTED));
 1468              		.loc 1 430 0
 1469 0bf8 00BF     		nop
 1470              	.L42:
 1471              		.loc 1 430 0 is_stmt 0 discriminator 1
 1472 0bfa 4FF4B040 		mov	r0, #22528
 1473 0bfe C4F20000 		movt	r0, 16384
 1474 0c02 4FF08401 		mov	r1, #132
 1475 0c06 C0F20701 		movt	r1, 7
 1476 0c0a FFF7FEFF 		bl	I2C_CheckEvent
 1477 0c0e 0346     		mov	r3, r0
 1478 0c10 002B     		cmp	r3, #0
 1479 0c12 F2D0     		beq	.L42
 431:../src/sensors.c **** 
 432:../src/sensors.c **** 	/* Send I2Cx START condition */
 433:../src/sensors.c **** 	I2C_GenerateSTART(I2C2, ENABLE);
 1480              		.loc 1 433 0 is_stmt 1
 1481 0c14 4FF4B040 		mov	r0, #22528
 1482 0c18 C4F20000 		movt	r0, 16384
 1483 0c1c 4FF00101 		mov	r1, #1
 1484 0c20 FFF7FEFF 		bl	I2C_GenerateSTART
 434:../src/sensors.c **** 
 435:../src/sensors.c **** 	/* Test on I2Cx EV5 and clear it or time out*/
 436:../src/sensors.c **** 
 437:../src/sensors.c **** 	while (!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_MODE_SELECT))
 1485              		.loc 1 437 0
 1486 0c24 00BF     		nop
 1487              	.L43:
 1488              		.loc 1 437 0 is_stmt 0 discriminator 1
 1489 0c26 4FF4B040 		mov	r0, #22528
 1490 0c2a C4F20000 		movt	r0, 16384
 1491 0c2e 4FF00101 		mov	r1, #1
 1492 0c32 C0F20301 		movt	r1, 3
 1493 0c36 FFF7FEFF 		bl	I2C_CheckEvent
 1494 0c3a 0346     		mov	r3, r0
 1495 0c3c 002B     		cmp	r3, #0
 1496 0c3e F2D0     		beq	.L43
 438:../src/sensors.c **** 	{}
 439:../src/sensors.c **** 
 440:../src/sensors.c **** 	/* Send I2Cx slave Address for read */
 441:../src/sensors.c **** 	I2C_Send7bitAddress(I2C2, device, I2C_Direction_Receiver);
 1497              		.loc 1 441 0 is_stmt 1
 1498 0c40 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1499 0c42 4FF4B040 		mov	r0, #22528
 1500 0c46 C4F20000 		movt	r0, 16384
 1501 0c4a 1946     		mov	r1, r3
 1502 0c4c 4FF00102 		mov	r2, #1
 1503 0c50 FFF7FEFF 		bl	I2C_Send7bitAddress
 442:../src/sensors.c **** 
 443:../src/sensors.c **** 	/* Test on I2Cx EV6 and clear it or time out */
 444:../src/sensors.c **** 
 445:../src/sensors.c **** 	while (!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED))
 1504              		.loc 1 445 0
 1505 0c54 00BF     		nop
 1506              	.L44:
 1507              		.loc 1 445 0 is_stmt 0 discriminator 1
 1508 0c56 4FF4B040 		mov	r0, #22528
 1509 0c5a C4F20000 		movt	r0, 16384
 1510 0c5e 4FF00201 		mov	r1, #2
 1511 0c62 C0F20301 		movt	r1, 3
 1512 0c66 FFF7FEFF 		bl	I2C_CheckEvent
 1513 0c6a 0346     		mov	r3, r0
 1514 0c6c 002B     		cmp	r3, #0
 1515 0c6e F2D0     		beq	.L44
 446:../src/sensors.c **** 	{}
 447:../src/sensors.c **** 
 448:../src/sensors.c **** 	/* I2Cx DMA Enable */
 449:../src/sensors.c **** 	I2C_DMACmd(I2C2, ENABLE);
 1516              		.loc 1 449 0 is_stmt 1
 1517 0c70 4FF4B040 		mov	r0, #22528
 1518 0c74 C4F20000 		movt	r0, 16384
 1519 0c78 4FF00101 		mov	r1, #1
 1520 0c7c FFF7FEFF 		bl	I2C_DMACmd
 450:../src/sensors.c **** 
 451:../src/sensors.c **** 	/* Enable DMA RX Channel */
 452:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, ENABLE);
 1521              		.loc 1 452 0
 1522 0c80 46F25800 		movw	r0, #24664
 1523 0c84 C4F20200 		movt	r0, 16386
 1524 0c88 4FF00101 		mov	r1, #1
 1525 0c8c FFF7FEFF 		bl	DMA_Cmd
 453:../src/sensors.c **** 
 454:../src/sensors.c **** 	DMA_ITConfig(DMA1_Stream3, DMA_IT_TC | DMA_IT_DME | DMA_IT_FE, ENABLE);
 1526              		.loc 1 454 0
 1527 0c90 46F25800 		movw	r0, #24664
 1528 0c94 C4F20200 		movt	r0, 16386
 1529 0c98 4FF09201 		mov	r1, #146
 1530 0c9c 4FF00102 		mov	r2, #1
 1531 0ca0 FFF7FEFF 		bl	DMA_ITConfig
 455:../src/sensors.c **** 	return ERROR;
 1532              		.loc 1 455 0
 1533 0ca4 4FF00003 		mov	r3, #0
 456:../src/sensors.c **** }
 1534              		.loc 1 456 0
 1535 0ca8 1846     		mov	r0, r3
 1536 0caa 07F14807 		add	r7, r7, #72
 1537 0cae BD46     		mov	sp, r7
 1538 0cb0 80BD     		pop	{r7, pc}
 1539              		.cfi_endproc
 1540              	.LFE119:
 1542 0cb2 00BF     		.align	2
 1543              		.global	masterReceive
 1544              		.thumb
 1545              		.thumb_func
 1547              	masterReceive:
 1548              	.LFB120:
 457:../src/sensors.c **** 
 458:../src/sensors.c **** ErrorStatus masterReceive(uint8_t device, uint8_t startReg, uint8_t *dataBuffer, uint8_t byteCount)
 459:../src/sensors.c **** {
 1549              		.loc 1 459 0
 1550              		.cfi_startproc
 1551              		@ args = 0, pretend = 0, frame = 72
 1552              		@ frame_needed = 1, uses_anonymous_args = 0
 1553 0cb4 80B5     		push	{r7, lr}
 1554              	.LCFI29:
 1555              		.cfi_def_cfa_offset 8
 1556              		.cfi_offset 14, -4
 1557              		.cfi_offset 7, -8
 1558 0cb6 92B0     		sub	sp, sp, #72
 1559              	.LCFI30:
 1560              		.cfi_def_cfa_offset 80
 1561 0cb8 00AF     		add	r7, sp, #0
 1562              	.LCFI31:
 1563              		.cfi_def_cfa_register 7
 1564 0cba 3A60     		str	r2, [r7, #0]
 1565 0cbc 0246     		mov	r2, r0
 1566 0cbe FA71     		strb	r2, [r7, #7]
 1567 0cc0 0A46     		mov	r2, r1
 1568 0cc2 BA71     		strb	r2, [r7, #6]
 1569 0cc4 7B71     		strb	r3, [r7, #5]
 460:../src/sensors.c **** 	DMA_InitTypeDef DMAInitStructure;
 461:../src/sensors.c **** 
 462:../src/sensors.c **** 	// Disable I2C2 interrupts
 463:../src/sensors.c **** 	I2C_ITConfig(I2C2, I2C_IT_BUF | I2C_IT_EVT | I2C_IT_ERR, DISABLE);
 1570              		.loc 1 463 0
 1571 0cc6 4FF4B040 		mov	r0, #22528
 1572 0cca C4F20000 		movt	r0, 16384
 1573 0cce 4FF4E061 		mov	r1, #1792
 1574 0cd2 4FF00002 		mov	r2, #0
 1575 0cd6 FFF7FEFF 		bl	I2C_ITConfig
 464:../src/sensors.c **** 
 465:../src/sensors.c **** 	// Disable DMA RX Channel
 466:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, DISABLE);
 1576              		.loc 1 466 0
 1577 0cda 46F25800 		movw	r0, #24664
 1578 0cde C4F20200 		movt	r0, 16386
 1579 0ce2 4FF00001 		mov	r1, #0
 1580 0ce6 FFF7FEFF 		bl	DMA_Cmd
 467:../src/sensors.c **** 	// Wait until stream is disabled
 468:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_RX) != DISABLE)
 1581              		.loc 1 468 0
 1582 0cea 00BF     		nop
 1583              	.L46:
 1584              		.loc 1 468 0 is_stmt 0 discriminator 1
 1585 0cec 46F25800 		movw	r0, #24664
 1586 0cf0 C4F20200 		movt	r0, 16386
 1587 0cf4 FFF7FEFF 		bl	DMA_GetCmdStatus
 1588 0cf8 0346     		mov	r3, r0
 1589 0cfa 002B     		cmp	r3, #0
 1590 0cfc F6D1     		bne	.L46
 469:../src/sensors.c **** 	{
 470:../src/sensors.c **** 	}
 471:../src/sensors.c **** 	// Deinit DMA
 472:../src/sensors.c **** 	DMA_DeInit(DMA_I2C2_RX);
 1591              		.loc 1 472 0 is_stmt 1
 1592 0cfe 46F25800 		movw	r0, #24664
 1593 0d02 C4F20200 		movt	r0, 16386
 1594 0d06 FFF7FEFF 		bl	DMA_DeInit
 473:../src/sensors.c **** 	// Configure I2C2 DMA
 474:../src/sensors.c **** 	//set init structure
 475:../src/sensors.c **** 	//channel to use
 476:../src/sensors.c **** 	DMAInitStructure.DMA_Channel = DMA_Channel_7;
 1595              		.loc 1 476 0
 1596 0d0a 4FF06063 		mov	r3, #234881024
 1597 0d0e FB60     		str	r3, [r7, #12]
 477:../src/sensors.c **** 	//peripheral data address
 478:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBaseAddr = (uint32_t)&I2C2->DR;//    I2C2_DR_ADDRESS;
 1598              		.loc 1 478 0
 1599 0d10 45F61003 		movw	r3, #22544
 1600 0d14 C4F20003 		movt	r3, 16384
 1601 0d18 3B61     		str	r3, [r7, #16]
 479:../src/sensors.c **** 	// DMA buffer address
 480:../src/sensors.c **** 	DMAInitStructure.DMA_Memory0BaseAddr = (uint32_t)dataBuffer;
 1602              		.loc 1 480 0
 1603 0d1a 3B68     		ldr	r3, [r7, #0]
 1604 0d1c 7B61     		str	r3, [r7, #20]
 481:../src/sensors.c **** 	DMAInitStructure.DMA_DIR = DMA_DIR_PeripheralToMemory;
 1605              		.loc 1 481 0
 1606 0d1e 4FF00003 		mov	r3, #0
 1607 0d22 BB61     		str	r3, [r7, #24]
 482:../src/sensors.c **** 	DMAInitStructure.DMA_BufferSize = byteCount;
 1608              		.loc 1 482 0
 1609 0d24 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1610 0d26 FB61     		str	r3, [r7, #28]
 483:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
 1611              		.loc 1 483 0
 1612 0d28 4FF00003 		mov	r3, #0
 1613 0d2c 3B62     		str	r3, [r7, #32]
 484:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable;
 1614              		.loc 1 484 0
 1615 0d2e 4FF48063 		mov	r3, #1024
 1616 0d32 7B62     		str	r3, [r7, #36]
 485:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
 1617              		.loc 1 485 0
 1618 0d34 4FF00003 		mov	r3, #0
 1619 0d38 BB62     		str	r3, [r7, #40]
 486:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
 1620              		.loc 1 486 0
 1621 0d3a 4FF00003 		mov	r3, #0
 1622 0d3e FB62     		str	r3, [r7, #44]
 487:../src/sensors.c **** 	DMAInitStructure.DMA_Mode = DMA_Mode_Normal;
 1623              		.loc 1 487 0
 1624 0d40 4FF00003 		mov	r3, #0
 1625 0d44 3B63     		str	r3, [r7, #48]
 488:../src/sensors.c **** 	DMAInitStructure.DMA_Priority = DMA_Priority_VeryHigh;
 1626              		.loc 1 488 0
 1627 0d46 4FF44033 		mov	r3, #196608
 1628 0d4a 7B63     		str	r3, [r7, #52]
 489:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOMode = DMA_FIFOMode_Enable;
 1629              		.loc 1 489 0
 1630 0d4c 4FF00403 		mov	r3, #4
 1631 0d50 BB63     		str	r3, [r7, #56]
 490:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOThreshold = DMA_FIFOThreshold_Full;
 1632              		.loc 1 490 0
 1633 0d52 4FF00303 		mov	r3, #3
 1634 0d56 FB63     		str	r3, [r7, #60]
 491:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryBurst = DMA_MemoryBurst_Single;
 1635              		.loc 1 491 0
 1636 0d58 4FF00003 		mov	r3, #0
 1637 0d5c 3B64     		str	r3, [r7, #64]
 492:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBurst = DMA_PeripheralBurst_Single;
 1638              		.loc 1 492 0
 1639 0d5e 4FF00003 		mov	r3, #0
 1640 0d62 7B64     		str	r3, [r7, #68]
 493:../src/sensors.c **** 	// Configure peripheral
 494:../src/sensors.c **** 	DMA_Init(DMA_I2C2_RX, &DMAInitStructure);
 1641              		.loc 1 494 0
 1642 0d64 46F25800 		movw	r0, #24664
 1643 0d68 C4F20200 		movt	r0, 16386
 1644 0d6c 07F10C03 		add	r3, r7, #12
 1645 0d70 1946     		mov	r1, r3
 1646 0d72 FFF7FEFF 		bl	DMA_Init
 495:../src/sensors.c **** 
 496:../src/sensors.c **** 	/* Master Receiver -----------------------------------------------------------*/
 497:../src/sensors.c **** 
 498:../src/sensors.c **** 	// Clear DMA flags
 499:../src/sensors.c **** 	DMA_ClearFlag(DMA_I2C2_RX, DMA_FLAG_TCIF3 | DMA_FLAG_FEIF3 | DMA_FLAG_DMEIF3 |  DMA_FLAG_TEIF3 | D
 1647              		.loc 1 499 0
 1648 0d76 46F25800 		movw	r0, #24664
 1649 0d7a C4F20200 		movt	r0, 16386
 1650 0d7e 4FF0FA51 		mov	r1, #524288000
 1651 0d82 FFF7FEFF 		bl	DMA_ClearFlag
 500:../src/sensors.c **** 
 501:../src/sensors.c **** 	/* Enable DMA NACK automatic generation */
 502:../src/sensors.c **** 	I2C_DMALastTransferCmd(I2C2, ENABLE);
 1652              		.loc 1 502 0
 1653 0d86 4FF4B040 		mov	r0, #22528
 1654 0d8a C4F20000 		movt	r0, 16384
 1655 0d8e 4FF00101 		mov	r1, #1
 1656 0d92 FFF7FEFF 		bl	I2C_DMALastTransferCmd
 503:../src/sensors.c **** 
 504:../src/sensors.c **** 	// Check BUSY flag
 505:../src/sensors.c **** 	if(I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1657              		.loc 1 505 0
 1658 0d96 4FF4B040 		mov	r0, #22528
 1659 0d9a C4F20000 		movt	r0, 16384
 1660 0d9e 4FF40031 		mov	r1, #131072
 1661 0da2 FFF7FEFF 		bl	I2C_GetFlagStatus
 1662 0da6 0346     		mov	r3, r0
 1663 0da8 002B     		cmp	r3, #0
 1664 0daa 0BD0     		beq	.L47
 506:../src/sensors.c **** 	{
 507:../src/sensors.c **** 		while(!I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1665              		.loc 1 507 0
 1666 0dac 00BF     		nop
 1667              	.L48:
 1668              		.loc 1 507 0 is_stmt 0 discriminator 1
 1669 0dae 4FF4B040 		mov	r0, #22528
 1670 0db2 C4F20000 		movt	r0, 16384
 1671 0db6 4FF40031 		mov	r1, #131072
 1672 0dba FFF7FEFF 		bl	I2C_GetFlagStatus
 1673 0dbe 0346     		mov	r3, r0
 1674 0dc0 002B     		cmp	r3, #0
 1675 0dc2 F4D0     		beq	.L48
 1676              	.L47:
 508:../src/sensors.c **** 		{}
 509:../src/sensors.c **** 	}
 510:../src/sensors.c **** 
 511:../src/sensors.c **** 	// Send I2C1 START condition
 512:../src/sensors.c **** 	I2C_GenerateSTART(I2C2, ENABLE);
 1677              		.loc 1 512 0 is_stmt 1
 1678 0dc4 4FF4B040 		mov	r0, #22528
 1679 0dc8 C4F20000 		movt	r0, 16384
 1680 0dcc 4FF00101 		mov	r1, #1
 1681 0dd0 FFF7FEFF 		bl	I2C_GenerateSTART
 513:../src/sensors.c **** 
 514:../src/sensors.c **** 	// wait for I2C1 EV5 --> Slave has acknowledged start condition
 515:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_MODE_SELECT));
 1682              		.loc 1 515 0
 1683 0dd4 00BF     		nop
 1684              	.L49:
 1685              		.loc 1 515 0 is_stmt 0 discriminator 1
 1686 0dd6 4FF4B040 		mov	r0, #22528
 1687 0dda C4F20000 		movt	r0, 16384
 1688 0dde 4FF00101 		mov	r1, #1
 1689 0de2 C0F20301 		movt	r1, 3
 1690 0de6 FFF7FEFF 		bl	I2C_CheckEvent
 1691 0dea 0346     		mov	r3, r0
 1692 0dec 002B     		cmp	r3, #0
 1693 0dee F2D0     		beq	.L49
 516:../src/sensors.c **** 
 517:../src/sensors.c **** 	// Send slave Address for write
 518:../src/sensors.c **** 	I2C_Send7bitAddress(I2C2, device, I2C_Direction_Transmitter);
 1694              		.loc 1 518 0 is_stmt 1
 1695 0df0 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1696 0df2 4FF4B040 		mov	r0, #22528
 1697 0df6 C4F20000 		movt	r0, 16384
 1698 0dfa 1946     		mov	r1, r3
 1699 0dfc 4FF00002 		mov	r2, #0
 1700 0e00 FFF7FEFF 		bl	I2C_Send7bitAddress
 519:../src/sensors.c **** 
 520:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_TRANSMITTER_MODE_SELECTED));
 1701              		.loc 1 520 0
 1702 0e04 00BF     		nop
 1703              	.L50:
 1704              		.loc 1 520 0 is_stmt 0 discriminator 1
 1705 0e06 4FF4B040 		mov	r0, #22528
 1706 0e0a C4F20000 		movt	r0, 16384
 1707 0e0e 4FF08201 		mov	r1, #130
 1708 0e12 C0F20701 		movt	r1, 7
 1709 0e16 FFF7FEFF 		bl	I2C_CheckEvent
 1710 0e1a 0346     		mov	r3, r0
 1711 0e1c 002B     		cmp	r3, #0
 1712 0e1e F2D0     		beq	.L50
 521:../src/sensors.c **** 
 522:../src/sensors.c **** 	I2C_SendData(I2C2, startReg);
 1713              		.loc 1 522 0 is_stmt 1
 1714 0e20 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1715 0e22 4FF4B040 		mov	r0, #22528
 1716 0e26 C4F20000 		movt	r0, 16384
 1717 0e2a 1946     		mov	r1, r3
 1718 0e2c FFF7FEFF 		bl	I2C_SendData
 523:../src/sensors.c **** 	// wait for I2C1 EV8_2 --> byte has been transmitted
 524:../src/sensors.c **** 	while(!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_BYTE_TRANSMITTED));
 1719              		.loc 1 524 0
 1720 0e30 00BF     		nop
 1721              	.L51:
 1722              		.loc 1 524 0 is_stmt 0 discriminator 1
 1723 0e32 4FF4B040 		mov	r0, #22528
 1724 0e36 C4F20000 		movt	r0, 16384
 1725 0e3a 4FF08401 		mov	r1, #132
 1726 0e3e C0F20701 		movt	r1, 7
 1727 0e42 FFF7FEFF 		bl	I2C_CheckEvent
 1728 0e46 0346     		mov	r3, r0
 1729 0e48 002B     		cmp	r3, #0
 1730 0e4a F2D0     		beq	.L51
 525:../src/sensors.c **** 
 526:../src/sensors.c **** 	/* Send I2Cx START condition */
 527:../src/sensors.c **** 	I2C_GenerateSTART(I2C2, ENABLE);
 1731              		.loc 1 527 0 is_stmt 1
 1732 0e4c 4FF4B040 		mov	r0, #22528
 1733 0e50 C4F20000 		movt	r0, 16384
 1734 0e54 4FF00101 		mov	r1, #1
 1735 0e58 FFF7FEFF 		bl	I2C_GenerateSTART
 528:../src/sensors.c **** 
 529:../src/sensors.c **** 	/* Test on I2Cx EV5 and clear it or time out*/
 530:../src/sensors.c **** 
 531:../src/sensors.c **** 	while (!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_MODE_SELECT))
 1736              		.loc 1 531 0
 1737 0e5c 00BF     		nop
 1738              	.L52:
 1739              		.loc 1 531 0 is_stmt 0 discriminator 1
 1740 0e5e 4FF4B040 		mov	r0, #22528
 1741 0e62 C4F20000 		movt	r0, 16384
 1742 0e66 4FF00101 		mov	r1, #1
 1743 0e6a C0F20301 		movt	r1, 3
 1744 0e6e FFF7FEFF 		bl	I2C_CheckEvent
 1745 0e72 0346     		mov	r3, r0
 1746 0e74 002B     		cmp	r3, #0
 1747 0e76 F2D0     		beq	.L52
 532:../src/sensors.c **** 	{}
 533:../src/sensors.c **** 
 534:../src/sensors.c **** 	/* Send I2Cx slave Address for read */
 535:../src/sensors.c **** 	I2C_Send7bitAddress(I2C2, device, I2C_Direction_Receiver);
 1748              		.loc 1 535 0 is_stmt 1
 1749 0e78 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1750 0e7a 4FF4B040 		mov	r0, #22528
 1751 0e7e C4F20000 		movt	r0, 16384
 1752 0e82 1946     		mov	r1, r3
 1753 0e84 4FF00102 		mov	r2, #1
 1754 0e88 FFF7FEFF 		bl	I2C_Send7bitAddress
 536:../src/sensors.c **** 
 537:../src/sensors.c **** 	/* Test on I2Cx EV6 and clear it or time out */
 538:../src/sensors.c **** 
 539:../src/sensors.c **** 	while (!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED))
 1755              		.loc 1 539 0
 1756 0e8c 00BF     		nop
 1757              	.L53:
 1758              		.loc 1 539 0 is_stmt 0 discriminator 1
 1759 0e8e 4FF4B040 		mov	r0, #22528
 1760 0e92 C4F20000 		movt	r0, 16384
 1761 0e96 4FF00201 		mov	r1, #2
 1762 0e9a C0F20301 		movt	r1, 3
 1763 0e9e FFF7FEFF 		bl	I2C_CheckEvent
 1764 0ea2 0346     		mov	r3, r0
 1765 0ea4 002B     		cmp	r3, #0
 1766 0ea6 F2D0     		beq	.L53
 540:../src/sensors.c **** 	{}
 541:../src/sensors.c **** 
 542:../src/sensors.c **** 	/* I2Cx DMA Enable */
 543:../src/sensors.c **** 	I2C_DMACmd(I2C2, ENABLE);
 1767              		.loc 1 543 0 is_stmt 1
 1768 0ea8 4FF4B040 		mov	r0, #22528
 1769 0eac C4F20000 		movt	r0, 16384
 1770 0eb0 4FF00101 		mov	r1, #1
 1771 0eb4 FFF7FEFF 		bl	I2C_DMACmd
 544:../src/sensors.c **** 
 545:../src/sensors.c **** 	/* Enable DMA RX Channel */
 546:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, ENABLE);
 1772              		.loc 1 546 0
 1773 0eb8 46F25800 		movw	r0, #24664
 1774 0ebc C4F20200 		movt	r0, 16386
 1775 0ec0 4FF00101 		mov	r1, #1
 1776 0ec4 FFF7FEFF 		bl	DMA_Cmd
 547:../src/sensors.c **** 
 548:../src/sensors.c **** 	/* Wait until I2Cx_DMA_STREAM_RX enabled or time out */
 549:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_RX)!= ENABLE)
 1777              		.loc 1 549 0
 1778 0ec8 00BF     		nop
 1779              	.L54:
 1780              		.loc 1 549 0 is_stmt 0 discriminator 1
 1781 0eca 46F25800 		movw	r0, #24664
 1782 0ece C4F20200 		movt	r0, 16386
 1783 0ed2 FFF7FEFF 		bl	DMA_GetCmdStatus
 1784 0ed6 0346     		mov	r3, r0
 1785 0ed8 012B     		cmp	r3, #1
 1786 0eda F6D1     		bne	.L54
 550:../src/sensors.c **** 	{}
 551:../src/sensors.c **** 
 552:../src/sensors.c **** 	/* Transfer complete or time out */
 553:../src/sensors.c **** 
 554:../src/sensors.c **** 	while (DMA_GetFlagStatus(DMA_I2C2_RX,DMA_FLAG_TCIF3)==RESET)
 1787              		.loc 1 554 0 is_stmt 1
 1788 0edc 00BF     		nop
 1789              	.L55:
 1790              		.loc 1 554 0 is_stmt 0 discriminator 1
 1791 0ede 46F25800 		movw	r0, #24664
 1792 0ee2 C4F20200 		movt	r0, 16386
 1793 0ee6 4FF0C051 		mov	r1, #402653184
 1794 0eea FFF7FEFF 		bl	DMA_GetFlagStatus
 1795 0eee 0346     		mov	r3, r0
 1796 0ef0 002B     		cmp	r3, #0
 1797 0ef2 F4D0     		beq	.L55
 555:../src/sensors.c **** 	{
 556:../src/sensors.c **** 	}
 557:../src/sensors.c **** 
 558:../src/sensors.c **** 	/* Send I2Cx STOP Condition */
 559:../src/sensors.c **** 	I2C_GenerateSTOP(I2C2, ENABLE);
 1798              		.loc 1 559 0 is_stmt 1
 1799 0ef4 4FF4B040 		mov	r0, #22528
 1800 0ef8 C4F20000 		movt	r0, 16384
 1801 0efc 4FF00101 		mov	r1, #1
 1802 0f00 FFF7FEFF 		bl	I2C_GenerateSTOP
 560:../src/sensors.c **** 
 561:../src/sensors.c **** 	/* Disable DMA RX Channel */
 562:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, DISABLE);
 1803              		.loc 1 562 0
 1804 0f04 46F25800 		movw	r0, #24664
 1805 0f08 C4F20200 		movt	r0, 16386
 1806 0f0c 4FF00001 		mov	r1, #0
 1807 0f10 FFF7FEFF 		bl	DMA_Cmd
 563:../src/sensors.c **** 
 564:../src/sensors.c **** 	/* Wait until I2Cx_DMA_STREAM_RX disabled or time out */
 565:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_RX)!= DISABLE)
 1808              		.loc 1 565 0
 1809 0f14 00BF     		nop
 1810              	.L56:
 1811              		.loc 1 565 0 is_stmt 0 discriminator 1
 1812 0f16 46F25800 		movw	r0, #24664
 1813 0f1a C4F20200 		movt	r0, 16386
 1814 0f1e FFF7FEFF 		bl	DMA_GetCmdStatus
 1815 0f22 0346     		mov	r3, r0
 1816 0f24 002B     		cmp	r3, #0
 1817 0f26 F6D1     		bne	.L56
 566:../src/sensors.c **** 	{}
 567:../src/sensors.c **** 	/* Disable I2C DMA request */
 568:../src/sensors.c **** 	I2C_DMACmd(I2C2,DISABLE);
 1818              		.loc 1 568 0 is_stmt 1
 1819 0f28 4FF4B040 		mov	r0, #22528
 1820 0f2c C4F20000 		movt	r0, 16384
 1821 0f30 4FF00001 		mov	r1, #0
 1822 0f34 FFF7FEFF 		bl	I2C_DMACmd
 569:../src/sensors.c **** 	return SUCCESS;
 1823              		.loc 1 569 0
 1824 0f38 4FF00103 		mov	r3, #1
 570:../src/sensors.c **** }
 1825              		.loc 1 570 0
 1826 0f3c 1846     		mov	r0, r3
 1827 0f3e 07F14807 		add	r7, r7, #72
 1828 0f42 BD46     		mov	sp, r7
 1829 0f44 80BD     		pop	{r7, pc}
 1830              		.cfi_endproc
 1831              	.LFE120:
 1833 0f46 00BF     		.align	2
 1834              		.global	masterReceive_HMC5883L
 1835              		.thumb
 1836              		.thumb_func
 1838              	masterReceive_HMC5883L:
 1839              	.LFB121:
 571:../src/sensors.c **** 
 572:../src/sensors.c **** ErrorStatus masterReceive_HMC5883L(uint8_t device, uint8_t startReg, uint8_t *dataBuffer, uint8_t b
 573:../src/sensors.c **** {
 1840              		.loc 1 573 0
 1841              		.cfi_startproc
 1842              		@ args = 0, pretend = 0, frame = 72
 1843              		@ frame_needed = 1, uses_anonymous_args = 0
 1844 0f48 80B5     		push	{r7, lr}
 1845              	.LCFI32:
 1846              		.cfi_def_cfa_offset 8
 1847              		.cfi_offset 14, -4
 1848              		.cfi_offset 7, -8
 1849 0f4a 92B0     		sub	sp, sp, #72
 1850              	.LCFI33:
 1851              		.cfi_def_cfa_offset 80
 1852 0f4c 00AF     		add	r7, sp, #0
 1853              	.LCFI34:
 1854              		.cfi_def_cfa_register 7
 1855 0f4e 3A60     		str	r2, [r7, #0]
 1856 0f50 0246     		mov	r2, r0
 1857 0f52 FA71     		strb	r2, [r7, #7]
 1858 0f54 0A46     		mov	r2, r1
 1859 0f56 BA71     		strb	r2, [r7, #6]
 1860 0f58 7B71     		strb	r3, [r7, #5]
 574:../src/sensors.c **** 	DMA_InitTypeDef DMAInitStructure;
 575:../src/sensors.c **** 
 576:../src/sensors.c **** 	// Disable I2C2 interrupts
 577:../src/sensors.c **** 	I2C_ITConfig(I2C2, I2C_IT_BUF | I2C_IT_EVT | I2C_IT_ERR, DISABLE);
 1861              		.loc 1 577 0
 1862 0f5a 4FF4B040 		mov	r0, #22528
 1863 0f5e C4F20000 		movt	r0, 16384
 1864 0f62 4FF4E061 		mov	r1, #1792
 1865 0f66 4FF00002 		mov	r2, #0
 1866 0f6a FFF7FEFF 		bl	I2C_ITConfig
 578:../src/sensors.c **** 
 579:../src/sensors.c **** 	// Disable DMA RX Channel
 580:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, DISABLE);
 1867              		.loc 1 580 0
 1868 0f6e 46F25800 		movw	r0, #24664
 1869 0f72 C4F20200 		movt	r0, 16386
 1870 0f76 4FF00001 		mov	r1, #0
 1871 0f7a FFF7FEFF 		bl	DMA_Cmd
 581:../src/sensors.c **** 	// Wait until stream is disabled
 582:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_RX) != DISABLE)
 1872              		.loc 1 582 0
 1873 0f7e 00BF     		nop
 1874              	.L58:
 1875              		.loc 1 582 0 is_stmt 0 discriminator 1
 1876 0f80 46F25800 		movw	r0, #24664
 1877 0f84 C4F20200 		movt	r0, 16386
 1878 0f88 FFF7FEFF 		bl	DMA_GetCmdStatus
 1879 0f8c 0346     		mov	r3, r0
 1880 0f8e 002B     		cmp	r3, #0
 1881 0f90 F6D1     		bne	.L58
 583:../src/sensors.c **** 	{
 584:../src/sensors.c **** 	}
 585:../src/sensors.c **** 	// Deinit DMA
 586:../src/sensors.c **** 	DMA_DeInit(DMA_I2C2_RX);
 1882              		.loc 1 586 0 is_stmt 1
 1883 0f92 46F25800 		movw	r0, #24664
 1884 0f96 C4F20200 		movt	r0, 16386
 1885 0f9a FFF7FEFF 		bl	DMA_DeInit
 587:../src/sensors.c **** 	// Configure I2C2 DMA
 588:../src/sensors.c **** 	//set init structure
 589:../src/sensors.c **** 	//channel to use
 590:../src/sensors.c **** 	DMAInitStructure.DMA_Channel = DMA_Channel_7;
 1886              		.loc 1 590 0
 1887 0f9e 4FF06063 		mov	r3, #234881024
 1888 0fa2 FB60     		str	r3, [r7, #12]
 591:../src/sensors.c **** 	//peripheral data address
 592:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBaseAddr = (uint32_t)&I2C2->DR;//    I2C2_DR_ADDRESS;
 1889              		.loc 1 592 0
 1890 0fa4 45F61003 		movw	r3, #22544
 1891 0fa8 C4F20003 		movt	r3, 16384
 1892 0fac 3B61     		str	r3, [r7, #16]
 593:../src/sensors.c **** 	// DMA buffer address
 594:../src/sensors.c **** 	DMAInitStructure.DMA_Memory0BaseAddr = (uint32_t)dataBuffer;
 1893              		.loc 1 594 0
 1894 0fae 3B68     		ldr	r3, [r7, #0]
 1895 0fb0 7B61     		str	r3, [r7, #20]
 595:../src/sensors.c **** 	DMAInitStructure.DMA_DIR = DMA_DIR_PeripheralToMemory;
 1896              		.loc 1 595 0
 1897 0fb2 4FF00003 		mov	r3, #0
 1898 0fb6 BB61     		str	r3, [r7, #24]
 596:../src/sensors.c **** 	DMAInitStructure.DMA_BufferSize = byteCount;
 1899              		.loc 1 596 0
 1900 0fb8 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1901 0fba FB61     		str	r3, [r7, #28]
 597:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
 1902              		.loc 1 597 0
 1903 0fbc 4FF00003 		mov	r3, #0
 1904 0fc0 3B62     		str	r3, [r7, #32]
 598:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable;
 1905              		.loc 1 598 0
 1906 0fc2 4FF48063 		mov	r3, #1024
 1907 0fc6 7B62     		str	r3, [r7, #36]
 599:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
 1908              		.loc 1 599 0
 1909 0fc8 4FF00003 		mov	r3, #0
 1910 0fcc BB62     		str	r3, [r7, #40]
 600:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
 1911              		.loc 1 600 0
 1912 0fce 4FF00003 		mov	r3, #0
 1913 0fd2 FB62     		str	r3, [r7, #44]
 601:../src/sensors.c **** 	DMAInitStructure.DMA_Mode = DMA_Mode_Normal;
 1914              		.loc 1 601 0
 1915 0fd4 4FF00003 		mov	r3, #0
 1916 0fd8 3B63     		str	r3, [r7, #48]
 602:../src/sensors.c **** 	DMAInitStructure.DMA_Priority = DMA_Priority_VeryHigh;
 1917              		.loc 1 602 0
 1918 0fda 4FF44033 		mov	r3, #196608
 1919 0fde 7B63     		str	r3, [r7, #52]
 603:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOMode = DMA_FIFOMode_Enable;
 1920              		.loc 1 603 0
 1921 0fe0 4FF00403 		mov	r3, #4
 1922 0fe4 BB63     		str	r3, [r7, #56]
 604:../src/sensors.c **** 	DMAInitStructure.DMA_FIFOThreshold = DMA_FIFOThreshold_Full;
 1923              		.loc 1 604 0
 1924 0fe6 4FF00303 		mov	r3, #3
 1925 0fea FB63     		str	r3, [r7, #60]
 605:../src/sensors.c **** 	DMAInitStructure.DMA_MemoryBurst = DMA_MemoryBurst_Single;
 1926              		.loc 1 605 0
 1927 0fec 4FF00003 		mov	r3, #0
 1928 0ff0 3B64     		str	r3, [r7, #64]
 606:../src/sensors.c **** 	DMAInitStructure.DMA_PeripheralBurst = DMA_PeripheralBurst_Single;
 1929              		.loc 1 606 0
 1930 0ff2 4FF00003 		mov	r3, #0
 1931 0ff6 7B64     		str	r3, [r7, #68]
 607:../src/sensors.c **** 	// Configure peripheral
 608:../src/sensors.c **** 	DMA_Init(DMA_I2C2_RX, &DMAInitStructure);
 1932              		.loc 1 608 0
 1933 0ff8 46F25800 		movw	r0, #24664
 1934 0ffc C4F20200 		movt	r0, 16386
 1935 1000 07F10C03 		add	r3, r7, #12
 1936 1004 1946     		mov	r1, r3
 1937 1006 FFF7FEFF 		bl	DMA_Init
 609:../src/sensors.c **** 
 610:../src/sensors.c **** 	/* Master Receiver -----------------------------------------------------------*/
 611:../src/sensors.c **** 
 612:../src/sensors.c **** 	// Clear DMA flags
 613:../src/sensors.c **** 	DMA_ClearFlag(DMA_I2C2_RX, DMA_FLAG_TCIF3 | DMA_FLAG_FEIF3 | DMA_FLAG_DMEIF3 |  DMA_FLAG_TEIF3 | D
 1938              		.loc 1 613 0
 1939 100a 46F25800 		movw	r0, #24664
 1940 100e C4F20200 		movt	r0, 16386
 1941 1012 4FF0FA51 		mov	r1, #524288000
 1942 1016 FFF7FEFF 		bl	DMA_ClearFlag
 614:../src/sensors.c **** 
 615:../src/sensors.c **** 	/* Enable DMA NACK automatic generation */
 616:../src/sensors.c **** 	I2C_DMALastTransferCmd(I2C2, ENABLE);
 1943              		.loc 1 616 0
 1944 101a 4FF4B040 		mov	r0, #22528
 1945 101e C4F20000 		movt	r0, 16384
 1946 1022 4FF00101 		mov	r1, #1
 1947 1026 FFF7FEFF 		bl	I2C_DMALastTransferCmd
 617:../src/sensors.c **** 
 618:../src/sensors.c **** 	// Check BUSY flag
 619:../src/sensors.c **** 	if(I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1948              		.loc 1 619 0
 1949 102a 4FF4B040 		mov	r0, #22528
 1950 102e C4F20000 		movt	r0, 16384
 1951 1032 4FF40031 		mov	r1, #131072
 1952 1036 FFF7FEFF 		bl	I2C_GetFlagStatus
 1953 103a 0346     		mov	r3, r0
 1954 103c 002B     		cmp	r3, #0
 1955 103e 0BD0     		beq	.L59
 620:../src/sensors.c **** 	{
 621:../src/sensors.c **** 		while(!I2C_GetFlagStatus(I2C2, I2C_FLAG_BUSY))
 1956              		.loc 1 621 0
 1957 1040 00BF     		nop
 1958              	.L60:
 1959              		.loc 1 621 0 is_stmt 0 discriminator 1
 1960 1042 4FF4B040 		mov	r0, #22528
 1961 1046 C4F20000 		movt	r0, 16384
 1962 104a 4FF40031 		mov	r1, #131072
 1963 104e FFF7FEFF 		bl	I2C_GetFlagStatus
 1964 1052 0346     		mov	r3, r0
 1965 1054 002B     		cmp	r3, #0
 1966 1056 F4D0     		beq	.L60
 1967              	.L59:
 622:../src/sensors.c **** 		{}
 623:../src/sensors.c **** 	}
 624:../src/sensors.c **** 
 625:../src/sensors.c **** 	/* Send I2Cx START condition */
 626:../src/sensors.c **** 	I2C_GenerateSTART(I2C2, ENABLE);
 1968              		.loc 1 626 0 is_stmt 1
 1969 1058 4FF4B040 		mov	r0, #22528
 1970 105c C4F20000 		movt	r0, 16384
 1971 1060 4FF00101 		mov	r1, #1
 1972 1064 FFF7FEFF 		bl	I2C_GenerateSTART
 627:../src/sensors.c **** 
 628:../src/sensors.c **** 	/* Test on I2Cx EV5 and clear it or time out*/
 629:../src/sensors.c **** 
 630:../src/sensors.c **** 	while (!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_MODE_SELECT))
 1973              		.loc 1 630 0
 1974 1068 00BF     		nop
 1975              	.L61:
 1976              		.loc 1 630 0 is_stmt 0 discriminator 1
 1977 106a 4FF4B040 		mov	r0, #22528
 1978 106e C4F20000 		movt	r0, 16384
 1979 1072 4FF00101 		mov	r1, #1
 1980 1076 C0F20301 		movt	r1, 3
 1981 107a FFF7FEFF 		bl	I2C_CheckEvent
 1982 107e 0346     		mov	r3, r0
 1983 1080 002B     		cmp	r3, #0
 1984 1082 F2D0     		beq	.L61
 631:../src/sensors.c **** 	{}
 632:../src/sensors.c **** 
 633:../src/sensors.c **** 	/* Send I2Cx slave Address for read */
 634:../src/sensors.c **** 	I2C_Send7bitAddress(I2C2, device, I2C_Direction_Receiver);
 1985              		.loc 1 634 0 is_stmt 1
 1986 1084 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1987 1086 4FF4B040 		mov	r0, #22528
 1988 108a C4F20000 		movt	r0, 16384
 1989 108e 1946     		mov	r1, r3
 1990 1090 4FF00102 		mov	r2, #1
 1991 1094 FFF7FEFF 		bl	I2C_Send7bitAddress
 635:../src/sensors.c **** 
 636:../src/sensors.c **** 	/* Test on I2Cx EV6 and clear it or time out */
 637:../src/sensors.c **** 
 638:../src/sensors.c **** 	while (!I2C_CheckEvent(I2C2, I2C_EVENT_MASTER_RECEIVER_MODE_SELECTED))
 1992              		.loc 1 638 0
 1993 1098 00BF     		nop
 1994              	.L62:
 1995              		.loc 1 638 0 is_stmt 0 discriminator 1
 1996 109a 4FF4B040 		mov	r0, #22528
 1997 109e C4F20000 		movt	r0, 16384
 1998 10a2 4FF00201 		mov	r1, #2
 1999 10a6 C0F20301 		movt	r1, 3
 2000 10aa FFF7FEFF 		bl	I2C_CheckEvent
 2001 10ae 0346     		mov	r3, r0
 2002 10b0 002B     		cmp	r3, #0
 2003 10b2 F2D0     		beq	.L62
 639:../src/sensors.c **** 	{}
 640:../src/sensors.c **** 
 641:../src/sensors.c **** 	/* I2Cx DMA Enable */
 642:../src/sensors.c **** 	I2C_DMACmd(I2C2, ENABLE);
 2004              		.loc 1 642 0 is_stmt 1
 2005 10b4 4FF4B040 		mov	r0, #22528
 2006 10b8 C4F20000 		movt	r0, 16384
 2007 10bc 4FF00101 		mov	r1, #1
 2008 10c0 FFF7FEFF 		bl	I2C_DMACmd
 643:../src/sensors.c **** 
 644:../src/sensors.c **** 	/* Enable DMA RX Channel */
 645:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, ENABLE);
 2009              		.loc 1 645 0
 2010 10c4 46F25800 		movw	r0, #24664
 2011 10c8 C4F20200 		movt	r0, 16386
 2012 10cc 4FF00101 		mov	r1, #1
 2013 10d0 FFF7FEFF 		bl	DMA_Cmd
 646:../src/sensors.c **** 
 647:../src/sensors.c **** 	/* Wait until I2Cx_DMA_STREAM_RX enabled or time out */
 648:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_RX)!= ENABLE)
 2014              		.loc 1 648 0
 2015 10d4 00BF     		nop
 2016              	.L63:
 2017              		.loc 1 648 0 is_stmt 0 discriminator 1
 2018 10d6 46F25800 		movw	r0, #24664
 2019 10da C4F20200 		movt	r0, 16386
 2020 10de FFF7FEFF 		bl	DMA_GetCmdStatus
 2021 10e2 0346     		mov	r3, r0
 2022 10e4 012B     		cmp	r3, #1
 2023 10e6 F6D1     		bne	.L63
 649:../src/sensors.c **** 	{}
 650:../src/sensors.c **** 
 651:../src/sensors.c **** 	/* Transfer complete or time out */
 652:../src/sensors.c **** 
 653:../src/sensors.c **** 	while (DMA_GetFlagStatus(DMA_I2C2_RX,DMA_FLAG_TCIF3)==RESET)
 2024              		.loc 1 653 0 is_stmt 1
 2025 10e8 00BF     		nop
 2026              	.L64:
 2027              		.loc 1 653 0 is_stmt 0 discriminator 1
 2028 10ea 46F25800 		movw	r0, #24664
 2029 10ee C4F20200 		movt	r0, 16386
 2030 10f2 4FF0C051 		mov	r1, #402653184
 2031 10f6 FFF7FEFF 		bl	DMA_GetFlagStatus
 2032 10fa 0346     		mov	r3, r0
 2033 10fc 002B     		cmp	r3, #0
 2034 10fe F4D0     		beq	.L64
 654:../src/sensors.c **** 	{
 655:../src/sensors.c **** 	}
 656:../src/sensors.c **** 
 657:../src/sensors.c **** 	/* Send I2Cx STOP Condition */
 658:../src/sensors.c **** 	I2C_GenerateSTOP(I2C2, ENABLE);
 2035              		.loc 1 658 0 is_stmt 1
 2036 1100 4FF4B040 		mov	r0, #22528
 2037 1104 C4F20000 		movt	r0, 16384
 2038 1108 4FF00101 		mov	r1, #1
 2039 110c FFF7FEFF 		bl	I2C_GenerateSTOP
 659:../src/sensors.c **** 
 660:../src/sensors.c **** 	/* Disable DMA RX Channel */
 661:../src/sensors.c **** 	DMA_Cmd(DMA_I2C2_RX, DISABLE);
 2040              		.loc 1 661 0
 2041 1110 46F25800 		movw	r0, #24664
 2042 1114 C4F20200 		movt	r0, 16386
 2043 1118 4FF00001 		mov	r1, #0
 2044 111c FFF7FEFF 		bl	DMA_Cmd
 662:../src/sensors.c **** 
 663:../src/sensors.c **** 	/* Wait until I2Cx_DMA_STREAM_RX disabled or time out */
 664:../src/sensors.c **** 	while (DMA_GetCmdStatus(DMA_I2C2_RX)!= DISABLE)
 2045              		.loc 1 664 0
 2046 1120 00BF     		nop
 2047              	.L65:
 2048              		.loc 1 664 0 is_stmt 0 discriminator 1
 2049 1122 46F25800 		movw	r0, #24664
 2050 1126 C4F20200 		movt	r0, 16386
 2051 112a FFF7FEFF 		bl	DMA_GetCmdStatus
 2052 112e 0346     		mov	r3, r0
 2053 1130 002B     		cmp	r3, #0
 2054 1132 F6D1     		bne	.L65
 665:../src/sensors.c **** 	{}
 666:../src/sensors.c **** 	/* Disable I2C DMA request */
 667:../src/sensors.c **** 	I2C_DMACmd(I2C2,DISABLE);
 2055              		.loc 1 667 0 is_stmt 1
 2056 1134 4FF4B040 		mov	r0, #22528
 2057 1138 C4F20000 		movt	r0, 16384
 2058 113c 4FF00001 		mov	r1, #0
 2059 1140 FFF7FEFF 		bl	I2C_DMACmd
 668:../src/sensors.c **** 	return SUCCESS;
 2060              		.loc 1 668 0
 2061 1144 4FF00103 		mov	r3, #1
 669:../src/sensors.c **** }
 2062              		.loc 1 669 0
 2063 1148 1846     		mov	r0, r3
 2064 114a 07F14807 		add	r7, r7, #72
 2065 114e BD46     		mov	sp, r7
 2066 1150 80BD     		pop	{r7, pc}
 2067              		.cfi_endproc
 2068              	.LFE121:
 2070              	.Letext0:
 2071              		.file 2 "c:\\program files (x86)\\codesourcery\\eabi\\bin\\../lib/gcc/arm-none-eabi/4.6.3/../../..
 2072              		.file 3 "C:\\Users\\Jure\\workspace\\TemplateProject\\Libraries\\Device\\STM32F4xx\\Include/stm32f
 2073              		.file 4 "C:\\Users\\Jure\\workspace\\TemplateProject\\Libraries\\STM32F4xx_StdPeriph_Driver\\inc/s
 2074              		.file 5 "../src/var.h"
 2075              		.file 6 "C:\\Users\\Jure\\workspace\\TemplateProject\\Libraries\\CMSIS\\Include/core_cm4.h"
 2076              		.file 7 "../src/modbus.h"
DEFINED SYMBOLS
                            *ABS*:00000000 sensors.c
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:23     .bss:00000000 I2C2_ProcesState
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:20     .bss:00000000 $d
                            *COM*:00000008 I2C2_Flags
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:30     .bss:00000002 I2C2_StartReg
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:36     .bss:00000004 I2C2_ReadData
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:42     .bss:00000006 I2C2_WriteData
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:47     .bss:00000008 I2C2_DeviceAddress
                            *COM*:00000080 I2C2_DMABufTX
                            *COM*:00000080 I2C2_DMABufRX
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:55     .bss:0000000c I2C2_DMABufTXCount
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:61     .bss:00000010 I2C2_DMABufRXCount
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:67     .bss:00000014 I2C2_PollTimer
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:70     .text:00000000 $t
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:75     .text:00000000 sensorInit
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:1547   .text:00000cb4 masterReceive
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:1026   .text:0000082c masterSend
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:482    .text:0000042c MPU6000_Enable
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:602    .text:00000524 MPU6000_EnableI2CBypass
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:860    .text:00000700 HMC5883_Enable
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:938    .text:00000788 MPL3115A2_Enable
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:689    .text:000005c0 MPU6000_ConfigureI2CMaster
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:773    .text:00000664 MPU6000_EnableI2CMaster
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:204    .text:00000120 copySensorData
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:1290   .text:00000a6c masterReceive_beginDMA
C:\Users\Jure\AppData\Local\Temp\ccmSuV5g.s:1838   .text:00000f48 masterReceive_HMC5883L
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
flag0
Delaynus
MODBUSReg
I2C_ITConfig
DMA_Cmd
DMA_GetCmdStatus
DMA_DeInit
DMA_Init
DMA_ClearFlag
I2C_GetFlagStatus
I2C_GenerateSTART
I2C_CheckEvent
I2C_Send7bitAddress
I2C_DMACmd
DMA_GetFlagStatus
I2C_GenerateSTOP
I2C_DMALastTransferCmd
I2C_SendData
DMA_ITConfig
